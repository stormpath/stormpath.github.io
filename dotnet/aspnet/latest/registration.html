

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Registration &mdash; ASP.NET Library Guide  documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  

  
    <link rel="top" title="ASP.NET Library Guide  documentation" href="index.html"/>
        <link rel="next" title="Login" href="login.html"/>
        <link rel="prev" title="Current user API" href="me_api.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

  
  <script src="https://cdn.optimizely.com/js/225847041.js"></script>

  
  <script>
  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
  n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
  document,'script','https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '986262161469311');
  fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=986262161469311&ev=PageView&noscript=1"
  /></noscript>
</head>

<body class="wy-body-for-nav" role="document">

  
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NQZZFW"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NQZZFW');</script>

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> ASP.NET Library Guide
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#what-does-this-library-do">What does this library do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#what-is-stormpath">What is Stormpath?</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#who-should-use-stormpath">Who should use Stormpath</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#create-a-stormpath-account">Create a Stormpath account</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#create-an-api-key-pair">Create an API Key pair</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#find-your-stormpath-application">Find your Stormpath Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#example-projects">Example projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#create-a-new-project">Create a new project</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#install-the-library">Install the library</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#initialize-the-middleware">Initialize the middleware</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#loading-order">Loading order</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#required-settings">Required settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#api-credentials-file">API credentials file</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#markup-file-yaml-or-json">Markup file (YAML or JSON)</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#environment-variables">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#inline-options">Inline options</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#default-features">Default features</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#disabling-features">Disabling features</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#disabling-content-types">Disabling content types</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#specifying-the-server-uri">Specifying the server URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#stormpath-client-options">Stormpath Client options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="request_context.html">Request context</a><ul>
<li class="toctree-l2"><a class="reference internal" href="request_context.html#stormpath-client">Stormpath Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="request_context.html#stormpath-application">Stormpath Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="request_context.html#current-account">Current Account</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="using_the_sdk.html">Using the Stormpath SDK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="using_the_sdk.html#tasks-and-cancellation">Tasks and Cancellation</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_the_sdk.html#making-synchronous-calls">Making synchronous calls</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_the_sdk.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cors.html">Cross-origin requests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cors.html#configuring-the-pipeline">Configuring the pipeline</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#cookie-authentication">Cookie authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#oauth-2-0-password-grant">OAuth 2.0 password grant</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_authentication.html">API authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api_authentication.html#issuing-api-keys">Issuing API keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_authentication.html#http-basic-authentication">HTTP Basic authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_authentication.html#oauth-2-0-client-credentials-grant">OAuth 2.0 client credentials grant</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authorization.html">Authorization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="authorization.html#requiring-login">Requiring login</a></li>
<li class="toctree-l2"><a class="reference internal" href="authorization.html#groups-and-roles">Groups and roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="authorization.html#fine-grained-permissions">Fine-grained permissions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="id_site.html">ID Site</a><ul>
<li class="toctree-l2"><a class="reference internal" href="id_site.html#who-should-use-id-site">Who should use ID Site?</a></li>
<li class="toctree-l2"><a class="reference internal" href="id_site.html#how-does-it-work">How does it work?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="templates.html">View templates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="templates.html#default-views">Default views</a></li>
<li class="toctree-l2"><a class="reference internal" href="templates.html#custom-views">Custom views</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="oauth2.html">OAuth 2.0 API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="oauth2.html#configuration-options">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="oauth2.html#default-configuration">Default configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="me_api.html">Current user API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="me_api.html#configuration-options">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="me_api.html#using-the-endpoint">Using the endpoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="me_api.html#link-expansion">Link expansion</a></li>
<li class="toctree-l2"><a class="reference internal" href="me_api.html#default-configuration">Default configuration</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Registration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#configuration-options">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#password-strength-requirements">Password strength requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#email-verification">Email verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="#auto-login">Auto login</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pre-registration-handler">Pre-registration handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="#post-registration-handler">Post-registration handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="#customizing-the-form">Customizing the form</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mobile-json-api">Mobile/JSON API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#default-configuration">Default configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="login.html">Login</a><ul>
<li class="toctree-l2"><a class="reference internal" href="login.html#configuration-options">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#next-uri">Next URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#pre-login-handler">Pre-login handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#post-login-handler">Post-login handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#customizing-the-form">Customizing the form</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#mobile-json-api">Mobile/JSON API</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#default-configuration">Default configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="social_login.html">Social login</a><ul>
<li class="toctree-l2"><a class="reference internal" href="social_login.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="social_login.html#setting-up-facebook-login">Setting up Facebook login</a></li>
<li class="toctree-l2"><a class="reference internal" href="social_login.html#setting-up-github-login">Setting up Github login</a></li>
<li class="toctree-l2"><a class="reference internal" href="social_login.html#setting-up-google-login">Setting up Google login</a></li>
<li class="toctree-l2"><a class="reference internal" href="social_login.html#setting-up-linkedin-login">Setting up LinkedIn login</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="logout.html">Logout</a><ul>
<li class="toctree-l2"><a class="reference internal" href="logout.html#how-it-works">How it works</a></li>
<li class="toctree-l2"><a class="reference internal" href="logout.html#configuration-options">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="logout.html#pre-logout-handler">Pre-logout handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="logout.html#post-logout-handler">Post-logout handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="logout.html#default-configuration">Default configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="password_reset.html">Password reset</a><ul>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#enabling-the-workflow">Enabling the workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#how-it-works">How it works</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#configuration-options">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#auto-login">Auto login</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#pre-reset-handler">Pre-reset handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#post-reset-handler">Post-reset handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#mobile-json-api">Mobile/JSON API</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#default-configuration">Default configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="email_verification.html">Email verification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="email_verification.html#enabling-the-workflow">Enabling the workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="email_verification.html#how-it-works">How it works</a></li>
<li class="toctree-l2"><a class="reference internal" href="email_verification.html#configuration-options">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="email_verification.html#auto-login">Auto login</a></li>
<li class="toctree-l2"><a class="reference internal" href="email_verification.html#pre-verify-handler">Pre-verify handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="email_verification.html#post-verify-handler">Post-verify handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="email_verification.html#mobile-json-api">Mobile/JSON API</a></li>
<li class="toctree-l2"><a class="reference internal" href="email_verification.html#default-configuration">Default configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#inspecting-traffic">Inspecting traffic</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#getting-help">Getting help</a></li>
</ul>
</li>
</ul>

            
          

  <hr/>

  <li class="toctree-l1">
    <a class="reference internal" href="/csharp/product-guide/latest">C# SDK Documentation &rarr;</a>
  </li>

  <li class="toctree-l1">
    <a class="reference internal" href="/vbnet/product-guide/latest">VB SDK Documentation &rarr;</a>
  </li>

  <li class="toctree-l1">
    <a class="reference internal" href="/dotnet/api/">SDK API Reference &rarr;</a>
  </li>


        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ASP.NET Library Guide</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Registration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/registration.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="registration">
<span id="id1"></span><h1>Registration<a class="headerlink" href="#registration" title="Permalink to this headline">¶</a></h1>
<p>The registration feature of this library allows you to use Stormpath to create
new accounts in a Stormpath directory.  You can create traditional password-based accounts, or gather account data from other providers such as Facebook and Google.</p>
<p>By default, this library will serve an HTML registration page at <code class="docutils literal"><span class="pre">/register</span></code>.
You can change this URI, or disable the feature entirely if you wish.</p>
<div class="section" id="configuration-options">
<span id="registration-configuration"></span><h2>Configuration options<a class="headerlink" href="#configuration-options" title="Permalink to this headline">¶</a></h2>
<p>This feature supports several options that you can configure using code or markup (see the <a class="reference internal" href="configuration.html#configuration"><span>Configuration</span></a> section):</p>
<ul class="simple">
<li><strong>enabled</strong>: Whether the feature is enabled. (Default: <code class="docutils literal"><span class="pre">true</span></code>)</li>
<li><strong>uri</strong>: The path for this feature. (Default: <code class="docutils literal"><span class="pre">/register</span></code>)</li>
<li><strong>autoLogin</strong>: Whether the user should be logged in after registering. (Default: <code class="docutils literal"><span class="pre">false</span></code>)</li>
<li><strong>nextUri</strong>: The location to send the user after registering, if <strong>autoLogin</strong> is on. <a class="reference internal" href="social_login.html#social-login"><span>Social login</span></a> uses this value regardless of <strong>autoLogin</strong>. (Default: <code class="docutils literal"><span class="pre">/</span></code>)</li>
<li><strong>view</strong>: The view to render; see <a class="reference internal" href="templates.html#templates"><span>View templates</span></a>. (Default: <code class="docutils literal"><span class="pre">register</span></code>)</li>
<li><strong>form</strong>: The fields that will be displayed on the form; see <a class="reference internal" href="#register-customizing-form"><span>Customizing the form</span></a>.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Any unchanged options will retain their default values. See the <a class="reference internal" href="#register-default-configuration"><span>Default configuration</span></a> section to view the defaults.</p>
</div>
<div class="section" id="configuration-example">
<h3>Configuration example<a class="headerlink" href="#configuration-example" title="Permalink to this headline">¶</a></h3>
<p>You could, for example, change the endpoint path by setting this configuration (shown as YAML):</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">web</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/createAccount&quot;</span>
</pre></div>
</div>
<p>You could also set this configuration via code:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="n">app</span><span class="p">.</span><span class="n">UseStormpath</span><span class="p">(</span><span class="k">new</span> <span class="n">StormpathConfiguration</span>
<span class="p">{</span>
    <span class="n">Web</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebConfiguration</span>
    <span class="p">{</span>
        <span class="n">Register</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebRegisterRouteConfiguration</span>
        <span class="p">{</span>
            <span class="n">Uri</span> <span class="p">=</span> <span class="s">&quot;/createAccount&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>See the <a class="reference internal" href="configuration.html#configuration"><span>Configuration</span></a> section for more details on how configuration works, or <a class="reference internal" href="#register-default-configuration"><span>Default configuration</span></a> to see the default values for this route.</p>
</div>
</div>
<div class="section" id="password-strength-requirements">
<h2>Password strength requirements<a class="headerlink" href="#password-strength-requirements" title="Permalink to this headline">¶</a></h2>
<p>Stormpath supports complex password strength rules, such as the number of letters or special characters required.  These settings are controlled on a per-Directory basis.</p>
<p>If you want to modify the password strength rules for your application, use the <a class="reference external" href="https://api.stormpath.com">Stormpath Admin Console</a> to find the directory that is mapped to your application, and modify the associated password policy.</p>
<p>For more information, see the <a class="reference external" href="https://docs.stormpath.com/rest/product-guide/latest/accnt_mgmt.html#manage-password-policies">Account Password Strength Policy</a> section in the REST API documentation.</p>
</div>
<div class="section" id="email-verification">
<h2>Email verification<a class="headerlink" href="#email-verification" title="Permalink to this headline">¶</a></h2>
<p>We <strong>highly</strong> recommend that you use email verification, as it adds an additional layer of security to your site (it makes it harder for bots to create spam accounts).</p>
<p>Email verification will be automatically enabled if the Verification Email workflow is enabled on the Stormpath Directory linked to your application; see the <a class="reference internal" href="email_verification.html#email-verification"><span>Email verification</span></a> section.</p>
</div>
<div class="section" id="auto-login">
<span id="id2"></span><h2>Auto login<a class="headerlink" href="#auto-login" title="Permalink to this headline">¶</a></h2>
<p>After registering, the default behavior is to require the user to enter their new credentials to log in. If you want users to be automatically logged in after they register, use this configuration:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">web</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">autoLogin</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="l l-Scalar l-Scalar-Plain">nextUri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/&quot;</span>
</pre></div>
</div>
<p>By default the <code class="docutils literal"><span class="pre">nextUri</span></code> is to <code class="docutils literal"><span class="pre">/</span></code> (the root page), but you can modify this to whatever destination you want.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference internal" href="email_verification.html#email-verification"><span>Email verification</span></a> and <a class="reference internal" href="password_reset.html#password-reset"><span>Password reset</span></a> features will observe this setting as well.</p>
</div>
</div>
<div class="section" id="pre-registration-handler">
<h2>Pre-registration handler<a class="headerlink" href="#pre-registration-handler" title="Permalink to this headline">¶</a></h2>
<p>If you need to run code before a registration attempt is sent to Stormpath, you can attach a pre-registration handler when you configure the Stormpath middleware:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="n">app</span><span class="p">.</span><span class="n">UseStormpath</span><span class="p">(</span><span class="k">new</span> <span class="n">StormpathMiddlewareOptions</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Configuration</span> <span class="p">=</span> <span class="k">new</span> <span class="n">StormpathConfiguration</span><span class="p">(),</span> <span class="c1">// existing config, if any</span>
    <span class="n">PreRegistrationHandler</span> <span class="p">=</span> <span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">ct</span><span class="p">)</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">Task</span><span class="p">.</span><span class="n">FromResult</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>The signature of the handler is a <code class="docutils literal"><span class="pre">Func</span></code> that accepts a <code class="docutils literal"><span class="pre">PreRegistrationContext</span></code> and a <code class="docutils literal"><span class="pre">CancellationToken</span></code>, and returns a <code class="docutils literal"><span class="pre">Task</span></code>. It can be declared as a method instead of with lambda syntax:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="k">private</span> <span class="n">Task</span> <span class="nf">MyPreRegistrationHandler</span><span class="p">(</span>
    <span class="n">PreRegistrationContext</span> <span class="n">context</span><span class="p">,</span>
    <span class="n">CancellationToken</span> <span class="n">ct</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">Task</span><span class="p">.</span><span class="n">FromResult</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">New user accounts created through an external login mechanism (such as <a class="reference internal" href="social_login.html#social-login"><span>Social login</span></a>) will trigger both the pre/post-registration handlers and the pre/post-login handlers.</p>
</div>
<div class="section" id="targeting-an-account-store">
<h3>Targeting an Account Store<a class="headerlink" href="#targeting-an-account-store" title="Permalink to this headline">¶</a></h3>
<p>If you want to save the new Account in a specific Account Store (rather than the default Account Store for the Application), you can use a pre-registration handler to specify the Account Store:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="n">PreRegistrationHandler</span> <span class="p">=</span> <span class="k">async</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">ct</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">ctx</span><span class="p">.</span><span class="n">AccountStore</span> <span class="p">=</span> <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">Client</span><span class="p">.</span><span class="n">GetDirectoryAsync</span><span class="p">(</span>
        <span class="s">&quot;https://api.stormpath.com/v1/directories/xxx&quot;</span><span class="p">,</span> <span class="n">ct</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="post-registration-handler">
<h2>Post-registration handler<a class="headerlink" href="#post-registration-handler" title="Permalink to this headline">¶</a></h2>
<p>If you need to run code after a new account has been created, you can attach a post-registration handler when you configure the Stormpath middleware:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="n">app</span><span class="p">.</span><span class="n">UseStormpath</span><span class="p">(</span><span class="k">new</span> <span class="n">StormpathMiddlewareOptions</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Configuration</span> <span class="p">=</span> <span class="k">new</span> <span class="n">StormpathConfiguration</span><span class="p">(),</span> <span class="c1">// existing config, if any</span>
    <span class="n">PostRegistrationHandler</span> <span class="p">=</span> <span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">ct</span><span class="p">)</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">Task</span><span class="p">.</span><span class="n">FromResult</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>The signature of the handler is a <code class="docutils literal"><span class="pre">Func</span></code> that accepts a <code class="docutils literal"><span class="pre">PostRegistrationContext</span></code> and a <code class="docutils literal"><span class="pre">CancellationToken</span></code>, and returns a <code class="docutils literal"><span class="pre">Task</span></code>. It can be declared as a method instead of with lambda syntax:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="k">private</span> <span class="n">Task</span> <span class="nf">MyPostRegistrationHandler</span><span class="p">(</span>
    <span class="n">PostRegistrationContext</span> <span class="n">context</span><span class="p">,</span>
    <span class="n">CancellationToken</span> <span class="n">ct</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">Task</span><span class="p">.</span><span class="n">FromResult</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">New user accounts created through an external login mechanism (such as <a class="reference internal" href="social_login.html#social-login"><span>Social login</span></a>) will trigger both the pre/post-registration handlers and the pre/post-login handlers.</p>
</div>
<div class="section" id="saving-custom-data-for-new-accounts">
<h3>Saving Custom Data for new Accounts<a class="headerlink" href="#saving-custom-data-for-new-accounts" title="Permalink to this headline">¶</a></h3>
<p>A common use for a post-registration handler is to save some data automatically for new Accounts. For example, you could add a default quota value for every new user:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="n">PostRegistrationHandler</span> <span class="p">=</span> <span class="k">async</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">ct</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">ctx</span><span class="p">.</span><span class="n">Account</span><span class="p">.</span><span class="n">CustomData</span><span class="p">[</span><span class="s">&quot;quota&quot;</span><span class="p">]</span> <span class="p">=</span> <span class="m">100</span><span class="p">;</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">Account</span><span class="p">.</span><span class="n">SaveAsync</span><span class="p">(</span><span class="n">ct</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="addding-new-accounts-to-groups">
<h3>Addding new Accounts to groups<a class="headerlink" href="#addding-new-accounts-to-groups" title="Permalink to this headline">¶</a></h3>
<p>Another use for a post-registration handler is automatically adding new Accounts to an existing Group:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="n">PostRegistrationHandler</span> <span class="p">=</span> <span class="k">async</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">ct</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="p">.</span><span class="n">Account</span><span class="p">.</span><span class="n">AddGroupAsync</span><span class="p">(</span><span class="s">&quot;rebels&quot;</span><span class="p">,</span> <span class="n">ct</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="customizing-the-form">
<span id="register-customizing-form"></span><h2>Customizing the form<a class="headerlink" href="#customizing-the-form" title="Permalink to this headline">¶</a></h2>
<p>The registration form will render these fields by default, and they will be required:</p>
<ul class="simple">
<li>First Name (given name)</li>
<li>Last Name (surname)</li>
<li>Email</li>
<li>Password</li>
</ul>
<p>You can customize the form by simply changing the configuration. For example, while email and password will always be required, you could make first and last name optional. Or, you can ask the user for both an email address and a username. You can also specify your own custom fields, no code required!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you want to use a custom view for the form, see <a class="reference internal" href="templates.html#templates"><span>View templates</span></a>.</p>
</div>
<p>Each field item in the <code class="docutils literal"><span class="pre">stormpath.web.register.form.fields</span></code> collection has these configurable properties:</p>
<ul class="simple">
<li><strong>enabled</strong>: Whether the field exists on the form is and accepted in POST requests.</li>
<li><strong>visible</strong>: Whether the field is visible on the form.</li>
<li><strong>required</strong>: Whether an error will be shown if the field is missing.</li>
<li><strong>label</strong>: The label text rendered for the control.</li>
<li><strong>placeholder</strong>: The placeholder text in the control.</li>
<li><strong>type</strong>: The HTML input type of the control.</li>
</ul>
<div class="section" id="making-fields-optional">
<h3>Making fields optional<a class="headerlink" href="#making-fields-optional" title="Permalink to this headline">¶</a></h3>
<p>If you would like to show a field, but not require it, set the <code class="docutils literal"><span class="pre">required</span></code> property to <code class="docutils literal"><span class="pre">false</span></code>, as shown in YAML below:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">web</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">form</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">fields</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">givenName</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">visible</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="s">&quot;First</span><span class="nv"> </span><span class="s">Name&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">placeholder</span><span class="p p-Indicator">:</span> <span class="s">&quot;First</span><span class="nv"> </span><span class="s">Name&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">required</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;text&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">surname</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">visible</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="s">&quot;Last</span><span class="nv"> </span><span class="s">Name&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">placeholder</span><span class="p p-Indicator">:</span> <span class="s">&quot;Last</span><span class="nv"> </span><span class="s">Name&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">required</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;text&quot;</span>
</pre></div>
</div>
<p>Or, in code:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="n">app</span><span class="p">.</span><span class="n">UseStormpath</span><span class="p">(</span><span class="k">new</span> <span class="n">StormpathConfiguration</span>
<span class="p">{</span>
    <span class="n">Web</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebConfiguration</span>
    <span class="p">{</span>
        <span class="n">Register</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebRegisterRouteConfiguration</span>
        <span class="p">{</span>
            <span class="n">Form</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebRegisterRouteFormConfiguration</span>
            <span class="p">{</span>
                <span class="n">Fields</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="n">WebFieldConfiguration</span><span class="p">&gt;</span>
                <span class="p">{</span>
<span class="na">                    [&quot;givenName&quot;]</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebFieldConfiguration</span> <span class="p">{</span> <span class="n">Required</span> <span class="p">=</span> <span class="k">false</span> <span class="p">},</span>
<span class="na">                    [&quot;surname&quot;]</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebFieldConfiguration</span> <span class="p">{</span> <span class="n">Required</span> <span class="p">=</span> <span class="k">false</span> <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>If you would like to remove a field from the form entirely, set the <code class="docutils literal"><span class="pre">visible</span></code> or <code class="docutils literal"><span class="pre">enabled</span></code> properties to <code class="docutils literal"><span class="pre">false</span></code>. The behavior is slightly different:</p>
<ul class="simple">
<li>If a field is <code class="docutils literal"><span class="pre">visible</span> <span class="pre">=</span> <span class="pre">false</span></code> but is still enabled, it will not be rendered on the form, but POST requests can still supply data for the field.</li>
<li>If a field is <code class="docutils literal"><span class="pre">enabled</span> <span class="pre">=</span> <span class="pre">false</span></code>, POST requests containing the field will return an error.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Because the Stormpath API requires a first and last name, the library will auto-fill these fields with <code class="docutils literal"><span class="pre">UNKNOWN</span></code> if you make them optional and the user does not provide them.</p>
</div>
</div>
<div class="section" id="adding-custom-fields">
<span id="register-custom-fields"></span><h3>Adding custom fields<a class="headerlink" href="#adding-custom-fields" title="Permalink to this headline">¶</a></h3>
<p>You can add your own custom fields to the form.  The values will be
automatically added to the user&#8217;s <a class="reference external" href="http://docs.stormpath.com/rest/product-guide/latest/accnt_mgmt.html#how-to-store-additional-user-information-as-custom-data">Custom Data</a> object when they register
successfully.  You can create a custom field by defining a new field configuration:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">web</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">form</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">fields</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">favoriteColor</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">visible</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="s">&quot;Favorite</span><span class="nv"> </span><span class="s">Color&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">placeholder</span><span class="p p-Indicator">:</span> <span class="s">&quot;e.g.</span><span class="nv"> </span><span class="s">red,</span><span class="nv"> </span><span class="s">blue&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">required</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;text&quot;</span>
</pre></div>
</div>
<p>Or, in code:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="n">app</span><span class="p">.</span><span class="n">UseStormpath</span><span class="p">(</span><span class="k">new</span> <span class="n">StormpathConfiguration</span>
<span class="p">{</span>
    <span class="n">Web</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebConfiguration</span>
    <span class="p">{</span>
        <span class="n">Register</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebRegisterRouteConfiguration</span>
        <span class="p">{</span>
            <span class="n">Form</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebRegisterRouteFormConfiguration</span>
            <span class="p">{</span>
                <span class="n">Fields</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="n">WebFieldConfiguration</span><span class="p">&gt;</span>
                <span class="p">{</span>
<span class="na">                    [&quot;favoriteColor&quot;]</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebFieldConfiguration</span>
                    <span class="p">{</span>
                        <span class="n">Enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
                        <span class="n">Visible</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
                        <span class="n">Label</span> <span class="p">=</span> <span class="s">&quot;Favorite Color&quot;</span><span class="p">,</span>
                        <span class="n">Placeholder</span> <span class="p">=</span> <span class="s">&quot;e.g. red, blue&quot;</span><span class="p">,</span>
                        <span class="n">Required</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
                        <span class="n">Type</span> <span class="p">=</span> <span class="s">&quot;text&quot;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="changing-field-order">
<h3>Changing field order<a class="headerlink" href="#changing-field-order" title="Permalink to this headline">¶</a></h3>
<p>If you want to change the order of the fields, you can do so by specifying the
<code class="docutils literal"><span class="pre">fieldOrder</span></code> array:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">web</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">form</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">fieldOrder</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="s">&quot;surname&quot;</span>
        <span class="p p-Indicator">-</span> <span class="s">&quot;givenName&quot;</span>
        <span class="p p-Indicator">-</span> <span class="s">&quot;email&quot;</span>
        <span class="p p-Indicator">-</span> <span class="s">&quot;password&quot;</span>
</pre></div>
</div>
<p>Or, in code:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="n">app</span><span class="p">.</span><span class="n">UseStormpath</span><span class="p">(</span><span class="k">new</span> <span class="n">StormpathConfiguration</span>
<span class="p">{</span>
    <span class="n">Web</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebConfiguration</span>
    <span class="p">{</span>
        <span class="n">Register</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebRegisterRouteConfiguration</span>
        <span class="p">{</span>
            <span class="n">Form</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebRegisterRouteFormConfiguration</span>
            <span class="p">{</span>
                <span class="n">FieldOrder</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">string</span><span class="p">[]</span>
                <span class="p">{</span>
                    <span class="s">&quot;surname&quot;</span><span class="p">,</span>
                    <span class="s">&quot;givenName&quot;</span><span class="p">,</span>
                    <span class="s">&quot;email&quot;</span><span class="p">,</span>
                    <span class="s">&quot;password&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Any visible fields that are omitted from the <code class="docutils literal"><span class="pre">fieldOrder</span></code> array will be placed at the end of the form.</p>
</div>
</div>
<div class="section" id="mobile-json-api">
<span id="json-registration-api"></span><h2>Mobile/JSON API<a class="headerlink" href="#mobile-json-api" title="Permalink to this headline">¶</a></h2>
<p>If you are using this library from a mobile application, or a client framework like Angular or React, you&#8217;ll interact with this endpoint via GET and POST requests.</p>
<div class="section" id="getting-the-form-view-model">
<h3>Getting the form view model<a class="headerlink" href="#getting-the-form-view-model" title="Permalink to this headline">¶</a></h3>
<p>By making a GET request to the registration endpoint with the <code class="docutils literal"><span class="pre">Accept:</span> <span class="pre">application/json</span></code> header, you can retrieve a JSON view model that describes the registration form and any external account stores that are mapped to your Stormpath Application.</p>
<p>Here&#8217;s an example view model that represents an application that has the default registration form, and a mapped Google social directory:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;accountStores&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Google social directory&quot;</span><span class="p">,</span>
      <span class="s2">&quot;href&quot;</span><span class="o">:</span> <span class="s2">&quot;https://api.stormpath.com/v1/directories/gc0Ty90yXXk8ifd2QPwt&quot;</span><span class="p">,</span>
      <span class="s2">&quot;provider&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;providerId&quot;</span><span class="o">:</span> <span class="s2">&quot;google&quot;</span><span class="p">,</span>
        <span class="s2">&quot;clientId&quot;</span><span class="o">:</span> <span class="s2">&quot;441084632428-9au0gijbo5icagep9u79qtf7ic7cc5au.apps.googleusercontent.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;scope&quot;</span><span class="o">:</span> <span class="s2">&quot;email profile&quot;</span><span class="p">,</span>
        <span class="s2">&quot;href&quot;</span><span class="o">:</span> <span class="s2">&quot;https://api.stormpath.com/v1/directories/gc0Ty90yXXk8ifd2QPwt/provider&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&quot;form&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;fields&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">&quot;label&quot;</span><span class="o">:</span> <span class="s2">&quot;First Name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;placeholder&quot;</span><span class="o">:</span> <span class="s2">&quot;First Name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;givenName&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;label&quot;</span><span class="o">:</span> <span class="s2">&quot;Last Name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;placeholder&quot;</span><span class="o">:</span> <span class="s2">&quot;Last Name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;surname&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;label&quot;</span><span class="o">:</span> <span class="s2">&quot;Email&quot;</span><span class="p">,</span>
        <span class="s2">&quot;placeholder&quot;</span><span class="o">:</span> <span class="s2">&quot;Email&quot;</span><span class="p">,</span>
        <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;email&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;email&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;label&quot;</span><span class="o">:</span> <span class="s2">&quot;Password&quot;</span><span class="p">,</span>
        <span class="s2">&quot;placeholder&quot;</span><span class="o">:</span> <span class="s2">&quot;Password&quot;</span><span class="p">,</span>
        <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;password&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;password&quot;</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">You may have to explicitly tell your client library that you want a JSON
response from the server. Not all libraries do this automatically. If the
library does not set the <code class="docutils literal"><span class="pre">Accept:</span> <span class="pre">application/json</span></code> header on the request,
you&#8217;ll get back the HTML registration form instead of the JSON response that you
expect!</p>
</div>
</div>
<div class="section" id="registering-a-user">
<h3>Registering a user<a class="headerlink" href="#registering-a-user" title="Permalink to this headline">¶</a></h3>
<p>Simply post a JSON object to <code class="docutils literal"><span class="pre">/register</span></code> and supply the fields that you wish to
populate for the user:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>POST /register
Accept: application/json
Content-Type: application/json

{
    &quot;email&quot;: &quot;foo@bar.com&quot;,
    &quot;password&quot;: &quot;mySuper3ecretPAssw0rd&quot;,
    &quot;surname&quot;: &quot;bar&quot;,
    &quot;givenName&quot;: &quot;foo&quot;
}
</pre></div>
</div>
<p>If the user is created successfully, you&#8217;ll get a <code class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></code> response. The body of the response will contain the account object that was created:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;account&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;https://api.stormpath.com/v1/accounts/xxx&quot;</span><span class="p">,</span>
    <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;foo@bar.com&quot;</span><span class="p">,</span>
    <span class="nt">&quot;modifiedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-01-26T20:50:03.931Z&quot;</span><span class="p">,</span>
    <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;ENABLED&quot;</span><span class="p">,</span>
    <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-10-13T20:54:22.215Z&quot;</span><span class="p">,</span>
    <span class="nt">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;foo@bar.com&quot;</span><span class="p">,</span>
    <span class="nt">&quot;middleName&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;surname&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span>
    <span class="nt">&quot;givenName&quot;</span><span class="p">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span>
    <span class="nt">&quot;fullName&quot;</span><span class="p">:</span> <span class="s2">&quot;foo bar&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If an error occurs, you&#8217;ll get an error response:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>
  <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Invalid username or password.&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="supplying-custom-fields">
<h3>Supplying custom fields<a class="headerlink" href="#supplying-custom-fields" title="Permalink to this headline">¶</a></h3>
<p>If any custom fields exist on the form (see <a class="reference internal" href="#register-custom-fields"><span>Adding custom fields</span></a>), you can supply them either as a root property, or a child of a property called <code class="docutils literal"><span class="pre">customData</span></code>:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>POST /register
Accept: application/json
Content-Type: application/json

{
    &quot;email&quot;: &quot;foo@bar.com&quot;,
    &quot;password&quot;: &quot;mySuper3ecretPAssw0rd&quot;,
    &quot;surname&quot;: &quot;bar&quot;,
    &quot;givenName&quot;: &quot;foo&quot;,
    &quot;customValue&quot;: &quot;custom value can be on root object or in customData object&quot;,
    &quot;customData&quot;: {
      &quot;favoriteColor&quot;: &quot;red&quot;
    }
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="default-configuration">
<span id="register-default-configuration"></span><h2>Default configuration<a class="headerlink" href="#default-configuration" title="Permalink to this headline">¶</a></h2>
<p>Options that are not overridden by explicit configuration (see <a class="reference internal" href="configuration.html#configuration"><span>Configuration</span></a>) will retain their default values.</p>
<p>For reference, the full default configuration for this route is shown as YAML below:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">web</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="l l-Scalar l-Scalar-Plain">uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/register&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">autoLogin</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class="l l-Scalar l-Scalar-Plain">nextUri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">view</span><span class="p p-Indicator">:</span> <span class="s">&quot;register&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">form</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">fields</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">givenName</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">visible</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="s">&quot;First</span><span class="nv"> </span><span class="s">Name&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">placeholder</span><span class="p p-Indicator">:</span> <span class="s">&quot;First</span><span class="nv"> </span><span class="s">Name&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">required</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;text&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">middleName</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
          <span class="l l-Scalar l-Scalar-Plain">visible</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="s">&quot;Middle</span><span class="nv"> </span><span class="s">Name&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">placeholder</span><span class="p p-Indicator">:</span> <span class="s">&quot;Middle</span><span class="nv"> </span><span class="s">Name&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">required</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;text&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">surname</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">visible</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="s">&quot;Last</span><span class="nv"> </span><span class="s">Name&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">placeholder</span><span class="p p-Indicator">:</span> <span class="s">&quot;Last</span><span class="nv"> </span><span class="s">Name&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">required</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;text&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">username</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
          <span class="l l-Scalar l-Scalar-Plain">visible</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="s">&quot;Username&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">placeholder</span><span class="p p-Indicator">:</span> <span class="s">&quot;Username&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">required</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;text&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">email</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">visible</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="s">&quot;Email&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">placeholder</span><span class="p p-Indicator">:</span> <span class="s">&quot;Email&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">required</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;email&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">password</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">visible</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="s">&quot;Password&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">placeholder</span><span class="p p-Indicator">:</span> <span class="s">&quot;Password&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">required</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;password&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">confirmPassword</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
          <span class="l l-Scalar l-Scalar-Plain">visible</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="s">&quot;Confirm</span><span class="nv"> </span><span class="s">Password&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">placeholder</span><span class="p p-Indicator">:</span> <span class="s">&quot;Confirm</span><span class="nv"> </span><span class="s">Password&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">required</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;password&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">fieldOrder</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="s">&quot;username&quot;</span>
        <span class="p p-Indicator">-</span> <span class="s">&quot;givenName&quot;</span>
        <span class="p p-Indicator">-</span> <span class="s">&quot;middleName&quot;</span>
        <span class="p p-Indicator">-</span> <span class="s">&quot;surname&quot;</span>
        <span class="p p-Indicator">-</span> <span class="s">&quot;email&quot;</span>
        <span class="p p-Indicator">-</span> <span class="s">&quot;password&quot;</span>
        <span class="p p-Indicator">-</span> <span class="s">&quot;confirmPassword&quot;</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">You can also refer to the <a class="reference external" href="https://github.com/stormpath/stormpath-framework-spec/blob/master/example-config.yaml">Example Stormpath configuration</a> to see the entire default library configuration.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="login.html" class="btn btn-neutral float-right" title="Login" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="me_api.html" class="btn btn-neutral" title="Current user API" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Stormpath, Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/scrollspy.js"></script>
      <script type="text/javascript" src="_static/gumshoe.min.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
   
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-29159574-1', 'auto');
    ga('send', 'pageview');
  </script>
  <script type="text/javascript">
    (function(d,s,i,r) {
        if (d.getElementById(i)){return;}
        var n=d.createElement(s),e=d.getElementsByTagName(s)[0];
        n.id=i;n.src='//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/475298.js';
        e.parentNode.insertBefore(n, e);
    })(document,"script","hs-analytics",300000);
  </script>
  <script type="text/javascript">
    var _kmq = _kmq || [];
    var _kmk = _kmk || '684b854336bd3a6523260ebd991eec06b18b929a';
    function _kms(u){
        setTimeout(function(){
            var d = document, f = d.getElementsByTagName('script')[0],
                    s = d.createElement('script');
            s.type = 'text/javascript'; s.async = true; s.src = u;
            f.parentNode.insertBefore(s, f);
        }, 1);
    }
    _kms('//i.kissmetrics.com/i.js');
    _kms('//doug1izaerwt3.cloudfront.net/' + _kmk + '.1.js');
  </script>
  <script src="//cdn.optimizely.com/js/225847041.js"></script>


</body>
</html>