

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5. Authorization With Stormpath &mdash; Stormpath PHP Documentation  documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="about.html"/>
    <link rel="top" title="Stormpath PHP Documentation  documentation" href="index.html"/>
        <link rel="next" title="6. Multi-Tenancy with Stormpath" href="multitenancy.html"/>
        <link rel="prev" title="4. Authenticating Accounts with Stormpath" href="auth_n.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

  
  <script src="https://cdn.optimizely.com/js/225847041.js"></script>

  
  <script>
  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
  n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
  document,'script','https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '986262161469311');
  fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=986262161469311&ev=PageView&noscript=1"
  /></noscript>
</head>

<body class="wy-body-for-nav" role="document">

  
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NQZZFW"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NQZZFW');</script>

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
  

          
            <a href="index.html" class="icon icon-home"> Stormpath PHP Documentation
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

  <div class="langpicker-container">
    <a href="#langpicker" class="langpicker-link">
      <i class="fa fa-code"></i>
      Switch Language
    </a>
    <div id="langpicker" style="display:none;">
      <div class="">
        <a href="/csharp/product-guide/latest/auth_z.html">C#</a>
      </div>
      <div class="">
        <a href="/java/product-guide/latest/auth_z.html">Java</a>
      </div>
      <div class="">
        <a href="/nodejs/product-guide/latest/auth_z.html">Node.js</a>
      </div>
      <div class="current">
        <a href="/php/product-guide/latest/auth_z.html">PHP</a>
      </div>
      <div class="">
        <a href="/python/product-guide/latest/auth_z.html">Python</a>
      </div>
      <div class="">
        <a href="/rest/product-guide/latest/auth_z.html">REST</a>
      </div>
      <div class="">
        <a href="/ruby/product-guide/latest/auth_z.html">Ruby</a>
      </div>
      <div class="">
        <a href="/vbnet/product-guide/latest/auth_z.html">Visual Basic</a>
      </div>
    </div>
  </div>

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">1. About Stormpath</a><ul>
<li class="toctree-l2"><a class="reference internal" href="about.html#what-is-stormpath">1.1. What is Stormpath?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="about.html#what-you-can-do-with-stormpath">1.1.1. What you can do with Stormpath</a></li>
<li class="toctree-l3"><a class="reference internal" href="about.html#who-should-use-stormpath">1.1.2. Who should use Stormpath</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="about.html#the-stormpath-data-model">1.2. The Stormpath Data Model</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">2. Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#sign-up-for-stormpath">2.1 Sign-up for Stormpath</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#create-an-api-key-pair">2.2 Create an API Key Pair</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#installing-the-sdk">2.3 Installing the SDK</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#retrieve-your-application">2.4. Retrieve Your Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#create-a-user-account">2.5. Create a User Account</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#authenticate-a-user-account">2.6. Authenticate a User Account</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#next-steps">2.7. Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="accnt_mgmt.html">3. Account Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="accnt_mgmt.html#modeling-your-user-base">3.1. Modeling Your User Base</a><ul>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#directories">3.1.1. Directories</a><ul>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#types-of-directories">Types of Directories</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#cloud-directories">Cloud Directories</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#mirror-directories">Mirror Directories</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#groups">3.1.2. Groups</a><ul>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#modeling-user-hierarchies-using-groups">Modeling User Hierarchies Using Groups</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#how-to-create-a-group">How to Create a Group</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="accnt_mgmt.html#how-to-store-accounts-in-stormpath">3.2. How to Store Accounts in Stormpath</a><ul>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#new-account-creation">3.2.1. New Account Creation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#add-a-new-account-to-a-directory">Add a New Account to a Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#add-an-existing-account-to-a-group">Add an Existing Account to a Group</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#adding-a-new-account-or-group-to-an-application-or-organization">Adding a new Account or Group to an Application or Organization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#importing-accounts">3.2.2. Importing Accounts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#importing-accounts-with-plaintext-passwords">Importing Accounts with Plaintext Passwords</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#importing-accounts-with-supported-password-hashes">Importing Accounts with Supported Password Hashes</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#importing-accounts-with-unsupported-password-hashes">Importing Accounts with Unsupported Password Hashes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#how-to-store-additional-user-information-as-custom-data">3.2.3. How to Store Additional User Information as Custom Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="accnt_mgmt.html#how-to-search-accounts">3.3. How to Search Accounts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#example-account-searches">3.3.1. Example Account Searches</a><ul>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#search-an-application-s-accounts-for-a-particular-word">Search an Application&#8217;s Accounts for a Particular Word</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#find-all-the-disabled-accounts-in-a-directory">Find All the Disabled Accounts in a Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#find-all-accounts-in-a-directory-that-were-modified-on-a-particular-day">Find All Accounts in a Directory That Were Modified on a Particular Day</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#searching-for-accounts-with-custom-data">3.3.2. Searching for Accounts with Custom Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="accnt_mgmt.html#how-to-manage-an-account-s-password">3.4. How to Manage an Account&#8217;s Password</a><ul>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#manage-password-policies">3.4.1. Manage Password Policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#change-an-account-s-password">3.4.2. Change an Account&#8217;s Password</a></li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#password-reset">3.4.3. Password Reset</a><ul>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#how-to-reset-a-password">How to Reset a Password</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#manage-password-reset-emails">Manage Password Reset Emails</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#password-reset-email-templates">Password Reset Email Templates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#how-to-find-when-an-account-s-password-was-changed">3.4.4. How to Find When An Account&#8217;s Password Was Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#how-to-restrict-password-reuse">3.4.5. How to Restrict Password Reuse</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="accnt_mgmt.html#how-to-manage-an-account-s-required-attributes">3.5. How to Manage an Account&#8217;s Required Attributes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#retrieving-your-directory-s-account-schema">3.5.1. Retrieving your Directory&#8217;s Account Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#modifying-your-directory-s-account-schema">3.5.2. Modifying your Directory&#8217;s Account Schema</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="accnt_mgmt.html#how-to-verify-an-account-s-email">3.6. How to Verify an Account&#8217;s Email</a><ul>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#the-email-verification-workflow">3.6.1. The Email Verification Workflow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#the-account-verification-base-url">The Account Verification Base URL</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#configuring-the-verification-workflow">3.6.2. Configuring the Verification Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#triggering-the-verification-email-creating-a-token">3.6.3. Triggering the Verification Email (Creating A Token)</a></li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#verifying-the-email-address-consuming-the-token">3.6.4. Verifying the Email Address (Consuming The Token)</a></li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#resending-the-verification-email">3.6.5. Resending the Verification Email</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="accnt_mgmt.html#customizing-stormpath-emails">3.7. Customizing Stormpath Emails</a><ul>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#what-emails-does-stormpath-send">3.7.1. What Emails Does Stormpath Send?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#id4">Account Creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#id5">Password Reset</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#customizing-stormpath-email-templates">3.7.2. Customizing Stormpath Email Templates</a><ul>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#using-email-macros">Using Email Macros</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#customizing-your-smtp-server">3.7.3. Customizing Your SMTP Server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#adding-a-new-custom-server">Adding a new Custom Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#deleting-a-custom-server">Deleting a Custom Server</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#restricting-user-email-domains">3.7.4 Restricting User Email Domains</a><ul>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#domain-entries">Domain Entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#working-with-the-lists">Working with the Lists</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="accnt_mgmt.html#account-linking">3.8. Account Linking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#how-login-works-with-linked-accounts">How Login Works with Linked Accounts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#application-vs-organization-account-linking-policies">Application vs Organization Account Linking Policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#example-login-behaviors">Example Login Behaviors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#how-to-link-accounts-manually">How to Link Accounts Manually</a></li>
<li class="toctree-l3"><a class="reference internal" href="accnt_mgmt.html#how-to-link-accounts-automatically">How to Link Accounts Automatically</a><ul>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#what-s-in-the-account-linking-policy">What&#8217;s in the Account Linking Policy</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#account-matching-and-account-verification">Account Matching and Account Verification</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#example-scenario-1">Example Scenario 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="accnt_mgmt.html#example-scenario-2">Example Scenario 2</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="auth_n.html">4. Authenticating Accounts with Stormpath</a><ul>
<li class="toctree-l2"><a class="reference internal" href="auth_n.html#how-password-authentication-works-in-stormpath">4.1. How Password Authentication Works in Stormpath</a><ul>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#authenticating-an-account">4.1.1. Authenticating An Account</a><ul>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#how-login-attempts-work-in-stormpath">4.1.2. How Login Attempts Work in Stormpath</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#manage-who-can-log-into-your-application">4.1.3. Manage Who Can Log Into Your Application</a><ul>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#mapping-a-new-account-store">Mapping a new Account Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#updating-an-existing-account-store">Updating an Existing Account Store</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="auth_n.html#how-token-based-authentication-works">4.2. How Token-Based Authentication Works</a><ul>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#introduction-to-token-based-authentication">4.2.1. Introduction to Token-Based Authentication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#why-oauth-2-0">Why OAuth 2.0?</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#what-tokens-are-available-for-token-based-authentication">What Tokens Are Available for Token-Based Authentication?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#using-stormpath-for-token-based-authentication">4.2.2. Using Stormpath for Token-Based Authentication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#configuring-token-based-authentication">Configuring Token-Based Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#generating-an-oauth-2-0-access-token">Generating an OAuth 2.0 Access Token</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#validating-an-access-token">Validating an Access Token</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#refreshing-access-tokens">Refreshing Access Tokens</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#revoking-access-and-refresh-tokens">Revoking Access and Refresh Tokens</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="auth_n.html#how-social-authentication-works">4.3. How Social Authentication Works</a><ul>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#attribute-mappings">Attribute Mappings</a></li>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#scopes">Scopes</a></li>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#social-login-providers">Social Login Providers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#google">4.3.1. Google</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#facebook">4.3.2. Facebook</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#github">4.3.3. Github</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#linkedin">4.3.4 LinkedIn</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#twitter">4.3.5. Twitter</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#generic-oauth-2-0-login">4.3.6. Generic OAuth 2.0 Login</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="auth_n.html#authenticating-against-an-ldap-directory">4.4. Authenticating Against an LDAP Directory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#the-ldap-authentication-flow">The LDAP Authentication Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#mirror-directories-and-ldap">Mirror Directories and LDAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#setting-up-login-with-ldap">Setting Up Login With LDAP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#step-1-create-an-ldap-directory">Step 1: Create an LDAP Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#step-2-install-your-ldap-agent">Step 2: Install your LDAP Agent</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#step-3-map-the-ldap-directory-as-an-account-store-for-your-application">Step 3: Map the LDAP Directory as an Account Store for Your Application</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="auth_n.html#authenticating-against-a-saml-directory">4.5. Authenticating Against a SAML Directory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#stormpath-as-the-identity-provider">4.5.1. Stormpath as the Identity Provider</a><ul>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#configuring-stormpath-as-an-identity-provider-via-rest">Configuring Stormpath as an Identity Provider via REST</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#stormpath-as-the-service-provider">4.5.2. Stormpath as the Service Provider</a><ul>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#identity-provider-initiated-saml-authentication">Identity Provider Initiated SAML Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#service-provider-initiated-saml-authentication">Service Provider Initiated SAML Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#configuring-stormpath-as-the-service-provider">Configuring Stormpath as the Service Provider</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#configuring-stormpath-as-a-service-provider-via-rest">Configuring Stormpath as a Service Provider via REST</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#the-stormpath-saml-flow">4.5.4. The Stormpath SAML Flow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#with-stormpath-as-the-identity-provider">With Stormpath as the Identity Provider</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#with-stormpath-as-the-service-provider">With Stormpath as the Service Provider</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="auth_n.html#using-multi-factor-authentication-mfa">4.6. Using Multi-Factor Authentication (MFA)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#enrolling-an-additional-factor">4.6.1. Enrolling an Additional Factor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#adding-an-sms-factor">Adding an SMS Factor</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#adding-a-google-authenticator-factor">Adding a Google Authenticator Factor</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#challenging-a-factor">4.6.2. Challenging a Factor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#challenging-after-factor-creation">Challenging After Factor Creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#challenging-during-factor-creation">Challenging During Factor Creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#challenging-a-factor-after-login">Challenging a Factor After Login</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="auth_n.html#how-api-key-authentication-works-in-stormpath">4.7. How API Key Authentication Works in Stormpath</a><ul>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#how-to-use-api-key-and-secret-authentication">4.7.1. How to use API Key and Secret Authentication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#create-an-api-key-for-an-account">Create an API Key for an Account</a></li>
<li class="toctree-l4"><a class="reference internal" href="auth_n.html#managing-api-keys">Managing API Keys</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#how-to-authenticate-using-http-basic">4.7.2. How to Authenticate Using HTTP Basic</a></li>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#how-to-exchange-an-api-key-for-an-access-token">4.7.3. How to Exchange an API Key for an Access Token</a></li>
<li class="toctree-l3"><a class="reference internal" href="auth_n.html#how-to-authenticate-using-http-bearer-access-tokens">4.7.4. How to Authenticate Using HTTP Bearer Access Tokens</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">5. Authorization With Stormpath</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-authorization">5.1. What is Authorization?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#simple-authorization">5.1.1. Simple Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#permissions-based-authorization">5.1.2. Permissions-based Authorization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#modeling-authorization-in-stormpath">5.2. Modeling Authorization in Stormpath</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-to-use-groups-to-model-authorization-roles">5.2.1. How to Use Groups to Model Authorization Roles</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#application-wide-roles">Application-Wide Roles</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#using-permissions">5.2.2. Using Permissions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#how-to-model-fine-grained-permissions">How to Model Fine-Grained Permissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#checking-user-and-role-permissions">Checking User and Role Permissions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="multitenancy.html">6. Multi-Tenancy with Stormpath</a><ul>
<li class="toctree-l2"><a class="reference internal" href="multitenancy.html#what-is-a-multi-tenant-application">6.1. What Is a Multi-Tenant Application?</a></li>
<li class="toctree-l2"><a class="reference internal" href="multitenancy.html#modeling-tenants-in-stormpath">6.2. Modeling Tenants in Stormpath</a><ul>
<li class="toctree-l3"><a class="reference internal" href="multitenancy.html#multi-tenancy-and-the-stormpath-data-model">6.2.1 Multi-Tenancy and the Stormpath Data Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="multitenancy.html#why-use-organizations">Why use Organizations?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="multitenancy.html#account-store-strategies-for-multi-tenancy">6.2.1. Account Store Strategies for Multi-Tenancy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="multitenancy.html#strategy-1-directory-per-organization">Strategy 1: Directory per Organization</a></li>
<li class="toctree-l4"><a class="reference internal" href="multitenancy.html#strategy-2-group-per-organization">Strategy 2: Group per Organization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="multitenancy.html#working-with-organizations">6.2.2. Working with Organizations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="multitenancy.html#how-to-create-an-organization">How to Create an Organization</a></li>
<li class="toctree-l4"><a class="reference internal" href="multitenancy.html#adding-an-account-store-to-an-organization">Adding an Account Store to an Organization</a></li>
<li class="toctree-l4"><a class="reference internal" href="multitenancy.html#registering-an-organization-as-an-account-store-for-an-application">Registering an Organization as an Account Store for an Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="multitenancy.html#adding-an-account-to-an-organization">Adding an Account to an Organization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="multitenancy.html#authenticating-an-account-against-an-organization">6.3. Authenticating an Account against an Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="multitenancy.html#routing-users-to-their-tenant">6.4 Routing Users to their Tenant</a><ul>
<li class="toctree-l3"><a class="reference internal" href="multitenancy.html#sub-domain">6.4.1. Sub-Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="multitenancy.html#separate-domain-space">Separate Domain Space</a></li>
<li class="toctree-l4"><a class="reference internal" href="multitenancy.html#combine-with-login-form-field">Combine With Login Form Field</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="multitenancy.html#login-form-field">6.4.2. Login Form Field</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="idsite.html">7. Using ID Site</a><ul>
<li class="toctree-l2"><a class="reference internal" href="idsite.html#what-is-an-id-site">7.1. What is an ID Site?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="idsite.html#why-should-i-use-stormpath-id-site">Why should I use Stormpath ID Site?</a></li>
<li class="toctree-l3"><a class="reference internal" href="idsite.html#browser-support">Browser Support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="idsite.html#how-does-id-site-work">7.2. How does ID Site Work?</a></li>
<li class="toctree-l2"><a class="reference internal" href="idsite.html#idsite-set-up">7.3. ID Site Set Up</a></li>
<li class="toctree-l2"><a class="reference internal" href="idsite.html#using-id-site-via-language">7.4. Using ID Site Via PHP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="idsite.html#step-1-getting-a-user-to-id-site">Step 1: Getting a User to ID Site</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="idsite.html#step-2-handling-the-callback-to-your-application-from-id-site">Step 2: Handling the Callback to your Application from ID Site</a><ul>
<li class="toctree-l4"><a class="reference internal" href="idsite.html#exchanging-the-id-site-jwt-for-an-oauth-token">Exchanging the ID Site JWT for an OAuth Token</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="idsite.html#step-3-optional-logging-out-of-id-site">Step 3: (Optional) Logging Out of ID Site</a></li>
<li class="toctree-l3"><a class="reference internal" href="idsite.html#resetting-your-password-with-id-site">Resetting Your Password with ID Site</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="idsite.html#using-id-site-for-multi-tenancy">7.5. Using ID Site for Multi-tenancy</a></li>
<li class="toctree-l2"><a class="reference internal" href="idsite.html#idsite-sso">7.6. ID Site &amp; Single Sign-On</a></li>
<li class="toctree-l2"><a class="reference internal" href="idsite.html#idsite-hosting">7.7. ID Site Hosting Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#required-api-credentials">1. Required API Credentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#setting-up-caching">2. Setting Up Caching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="configuration.html#memcached">Memcached</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html#redis">Redis</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html#other-caches">Other Caches</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#using-a-different-environment">3. Using a Different Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#configuration-sources">4. Configuration Sources</a><ul>
<li class="toctree-l3"><a class="reference internal" href="configuration.html#environment-variables">4.1. Environment Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html#yaml-json-markup-file">4.2. YAML/JSON Markup File</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html#api-credentials-file">4.3. API Credentials File</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html#inline-code-configuration">4.4. Inline Code Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#configuration-reference">5. Configuration Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="configuration.html#api-credentials">API Credentials</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html#base-url">Base URL</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html#cache-manager">Cache Manager</a><ul>
<li class="toctree-l4"><a class="reference internal" href="configuration.html#id13">Inline Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html#authentication-scheme">Authentication Scheme</a><ul class="simple">
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a><ul>
<li class="toctree-l2"><a class="reference internal" href="appendix.html#generating-an-oauth-2-0-access-token">Generating an OAuth 2.0 Access Token</a><ul>
<li class="toctree-l3"><a class="reference internal" href="appendix.html#client-credentials">Client Credentials</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix.html#social">Social</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix.html#password">Password</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix.html#stormpath-factor-challenge">Stormpath Factor Challenge</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix.html#token-generation-example">Token Generation Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="appendix.html#social-login-deprecated">Social Login (Deprecated)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="appendix.html#google">Google</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix.html#facebook">Facebook</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix.html#github">GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix.html#linkedin">LinkedIn</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="errors.html">Stormpath Error Codes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="errors.html#x-communication">110X: Communication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-1100">Error 1100</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-1101">Error 1101</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errors.html#xx-billing-payment">19XX: Billing / Payment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-1900">Error 1900</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-1902">Error 1902</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-1903">Error 1903</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-1904">Error 1904</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-1905">Error 1905</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-1906">Error 1906</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-1910">Error 1910</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errors.html#xxx-general-validation">2XXX: General Validation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2000">Error 2000</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2001">Error 2001</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2002">Error 2002</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2003">Error 2003</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2004">Error 2004</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2005">Error 2005</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2006">Error 2006</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2007">Error 2007</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2008">Error 2008</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2009">Error 2009</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2010">Error 2010</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2011">Error 2011</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2012">Error 2012</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2013">Error 2013</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2014">Error 2014</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2015">Error 2015</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2016">Error 2016</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2017">Error 2017</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2020">Error 2020</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2021">Error 2021</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2022">Error 2022</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2100">Error 2100</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2101">Error 2101</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2102">Error 2102</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2103">Error 2103</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2104">Error 2104</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2105">Error 2105</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2106">Error 2106</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2107">Error 2107</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-2108">Error 2108</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errors.html#xxx-custom-data">3XXX: Custom Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-3000">Error 3000</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-3001">Error 3001</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-3002">Error 3002</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-3003">Error 3003</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-3004">Error 3004</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errors.html#x-tenant">400X: Tenant</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-4001">Error 4001</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-4002">Error 4002</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errors.html#xxx-organization">4XXX: Organization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-4520">Error 4520</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-4600">Error 4600</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-4601">Error 4601</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-4602">Error 4602</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-4603">Error 4603</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-4604">Error 4604</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-4605">Error 4605</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-4606">Error 4606</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-4608">Error 4608</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-4610">Error 4610</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-4612">Error 4612</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#id1">4614</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-4700">Error 4700</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errors.html#xxx-application">5XXX: Application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5010">Error 5010</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5100">Error 5100</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5101">Error 5101</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5102">Error 5102</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5103">Error 5103</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5104">Error 5104</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5105">Error 5105</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5106">Error 5106</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5108">Error 5108</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5110">Error 5110</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5112">Error 5112</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5114">Error 5114</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5116">Error 5116</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5117">Error 5117</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5118">Error 5118</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5119">Error 5119</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5120">Error 5120</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5121">Error 5121</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5122">Error 5122</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-5200">Error 5200</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errors.html#xxx-directory">6XXX: Directory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-6100">Error 6100</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-6101">Error 6101</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-6201">Error 6201</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-6202">Error 6202</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-6203">Error 6203</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errors.html#xxx-account">7XXX: Account</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7100">Error 7100</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7101">Error 7101</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7102">Error 7102</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7103">Error 7103</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7104">Error 7104</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7105">Error 7105</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7106">Error 7106</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7107">Error 7107</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7200">Error 7200</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7201">Error 7201</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7202">Error 7202</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7205">Error 7205</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7206">Error 7206</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7301">Error 7301</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7500">Error 7500</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7501">Error 7501</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7502">Error 7502</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7503">Error 7503</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7504">Error 7504</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-7505">Error 7505</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errors.html#xxx-agent">9XXX: Agent</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-9000">Error 9000</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-9001">Error 9001</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-9002">Error 9002</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-9003">Error 9003</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-9004">Error 9004</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-9005">Error 9005</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-9006">Error 9006</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errors.html#xx-oauth-errors">100XX: OAuth Errors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-10010">Error 10010</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-10011">Error 10011</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-10012">Error 10012</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-10013">Error 10013</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-10014">Error 10014</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-10015">Error 10015</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-10016">Error 10016</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-10017">Error 10017</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errors.html#xx-saml-errors">101XX: SAML Errors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-10100">Error 10100</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-10101">Error 10101</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-10102">Error 10102</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errors.html#xx-token-errors">110XX: Token Errors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-11001">Error 11001</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-11002">Error 11002</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-11003">Error 11003</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-11004">Error 11004</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-11005">Error 11005</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errors.html#xx-id-site-jwt">120XX: ID Site JWT</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-12001">Error 12001</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-12002">Error 12002</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errors.html#xx-smtp-server">130XX: SMTP Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13000">Error 13000</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13001">Error 13001</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13002">Error 13002</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13003">Error 13003</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errors.html#xxx-multi-factor-authentication">13XXX: Multi-Factor Authentication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13100">Error 13100</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13101">Error 13101</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13102">Error 13102</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13103">Error 13103</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13104">Error 13104</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13105">Error 13105</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13106">Error 13106</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13107">Error 13107</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13108">Error 13108</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13109">Error 13109</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13110">Error 13110</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13111">Error 13111</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13112">Error 13112</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html#error-13113">Error 13113</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          

  

  
    <li class="toctree-l1">
      <a class="reference internal" href="/php/apidocs/">PHP API Reference</a>
    </li>
  


        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Stormpath PHP Documentation</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 







<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>5. Authorization With Stormpath</li>
    <li class="wy-breadcrumbs-aside">
      
          
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <blockquote>
<div></div></blockquote>
<div class="section" id="authorization-with-stormpath">
<span id="authz"></span><h1>5. Authorization With Stormpath<a class="headerlink" href="#authorization-with-stormpath" title="Permalink to this headline"></a></h1>
<p>This section will provide you with a quick introduction to Authorization with Stormpath. It begins by answering the question &#8220;What is authorization?&#8221;, including the difference between simple authorization checks and permissions-based authorization. It then describes some approaches to modeling authorization in Stormpath. Those include: using the Group resource to model roles, expanding those roles to cover every tenant in your application, and finally how to create fine-grained permissions.</p>
<div class="section" id="what-is-authorization">
<h2>5.1. What is Authorization?<a class="headerlink" href="#what-is-authorization" title="Permalink to this headline"></a></h2>
<p>Authorization is simply the way in which we determine the permissions someone has to do something. In contrast to authentication, which is how we determine who a person is, <strong>authorization</strong> is how we determine <strong>what a person can do</strong>.</p>
<p>Once a user has entered in a valid login and password (authentication), there are the permission checks (authorization) that can be performed which dictate what access rights they have to your system resources. Going back to our airport scenario, once you have proven who you are with your passport, the airline also checks that you are permitted to board the plane by checking that you have a valid boarding pass.</p>
<p>One distinction, though, is whether the permission is attached to the user, or to the resource that they are accessing. To go back to our airport scenario, we can imagine the airline has two options.</p>
<div class="section" id="simple-authorization">
<h3>5.1.1. Simple Authorization<a class="headerlink" href="#simple-authorization" title="Permalink to this headline"></a></h3>
<p>First, the airline can have at the gate a master list of all passengers who are allowed to board the plane. This is equivalent to hard-coding permission checks into your application, and then tying them in some way to a user. This means that your authorization logic can be based on checks of a user&#8217;s particular identity (e.g. <code class="docutils literal"><span class="pre">if</span> <span class="pre">(user(&quot;jsmith&quot;)</span> <span class="pre">{...</span></code>) or their membership in a particular Group (e.g. <code class="docutils literal"><span class="pre">if</span> <span class="pre">(user.group(&quot;passengers&quot;)</span> <span class="pre">{...</span></code>).  This simple authorization is perfectly sufficient for many applications, but has some downsides. One downside is that it can result in authorization rules that are more difficult to change dynamically. Another downside is that any change in authorization rules can end-up requiring a lot of refactoring of code, test cases, etc. A more dynamic and powerful way of handling authorization is through the use of permissions.</p>
</div>
<div class="section" id="permissions-based-authorization">
<h3>5.1.2. Permissions-based Authorization<a class="headerlink" href="#permissions-based-authorization" title="Permalink to this headline"></a></h3>
<p>Permissions, at their most basic, are statements of functionality that define a resource and what actions are possible for that resource. Going back to our airport scenario, an alternative to the boarding master list is that the airline sets a requirement: every passenger who wants to board the plane must bring a boarding pass. This pass comes with permission to perform the &#8220;board&#8221; action onto a specific flight number. So now, instead of basing authorization around a particular user identifier, we could require a certain permission to perform an action on a resource (e.g. <code class="docutils literal"><span class="pre">if</span> <span class="pre">(user.isPermitted(&quot;flight:board:ac232&quot;))</span></code>). This approach has many advantages, including more flexibility with regards to your security model, and separating your application logic from your data model.</p>
</div>
</div>
<div class="section" id="modeling-authorization-in-stormpath">
<h2>5.2. Modeling Authorization in Stormpath<a class="headerlink" href="#modeling-authorization-in-stormpath" title="Permalink to this headline"></a></h2>
<p>From the perspective of a REST API, Stormpath only serves as the repository for authorization data. Authorization enforcement must happen on the client-side, and one of the many <a class="reference external" href="https://docs.stormpath.com/home/">Stormpath Integrations</a> can help you with this. In this section we will discuss how to model the authorization data which is extremely important to your overall security model.</p>
<div class="section" id="how-to-use-groups-to-model-authorization-roles">
<span id="role-groups"></span><h3>5.2.1. How to Use Groups to Model Authorization Roles<a class="headerlink" href="#how-to-use-groups-to-model-authorization-roles" title="Permalink to this headline"></a></h3>
<p>The Group resource is central to many of the more advanced forms of authorization available with Stormpath. Among other things, you can use Groups for things like <a class="reference internal" href="accnt_mgmt.html#hierarchy-groups"><span>modelling hierarchies</span></a>, as well as creating user roles that span every organization that is using your application.</p>
<p>As we have already said, you can think of Groups as labels applied to Accounts via the GroupMembership resource. They can be used to organize users, like having all Accounts belonging to users from Tatooine associated with a &#8220;Tatooine&#8221; user Group resource. However, much in the same way that a label can be used to define an officer&#8217;s rank (and thereby what he is authorized to do), Groups can also be used to model &#8220;roles&#8221; in Stormpath for the purposes of role-based access control. If we associate an Account with a certain role Group, then that Account will have all the authorizations defined for that Group. Moreover, if an Account is associated with multiple Groups then it will inherit authorization from all of them.</p>
<p>Note that when we say &#8220;user Group&#8221; and &#8220;role Group&#8221; we are not discussing two different types of Group resources here, but just pointing out that the Group resource has multiple applications. So that &#8220;Tatooine&#8221; Group could be used to organize all Accounts for users residing on Tatooine, but it could also come with some sort of authorization permissions associated with it as well. A more common scenario would be having a Group called  &#8220;administrators&#8221;, and that could be used to organize everyone with the permissions required for an administrator in your application.</p>
<p>Also roles do not require you to use permissions-based authorization. You can still include checks in your code along the lines of <code class="docutils literal"><span class="pre">if</span> <span class="pre">(user.group(&quot;authRole&quot;)</span> <span class="pre">{...</span></code>.</p>
<p>Now that we have some understanding of authorization roles in Stormpath, we can discussion another powerful use of Stormpath&#8217;s flexible data model.</p>
<div class="section" id="application-wide-roles">
<span id="app-wide-roles"></span><h4>Application-Wide Roles<a class="headerlink" href="#application-wide-roles" title="Permalink to this headline"></a></h4>
<p>In a multi-tenant SaaS application, it is easy to imagine a scenario where you might want to have user Accounts segregated based upon the tenant that they belong to, while at the same time defining authorization based on broader, application-wide roles. In Stormpath, we recommended that you model every tenant that uses your Application using the <strong>Organization</strong> resource. The Organization resource is a container for Directory and Group resources that makes it easier to model user bases with multiple tenants. For more information about this, please see the <a class="reference internal" href="multitenancy.html#multitenancy"><span>multi-tenancy chapter</span></a>.</p>
<p>Alongside these Organizations and their Account Stores, it is also possible to define application-wide Groups that allow for roles that span across Organizations, regardless of which tenant a user belongs to. We can illustrate this with an example.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This just one possible way of modeling a multi-tenant app with application-wide roles. Your approach may vary. If you need help with modeling your user base, feel free to contact us at <a class="reference external" href="mailto:support&#37;&#52;&#48;stormpath&#46;com">support<span>&#64;</span>stormpath<span>&#46;</span>com</a> and we will help as best as we can.</p>
</div>
<p>Specifically, we will use the Tenant-per-Group example from <a class="reference internal" href="multitenancy.html#multitenancy-strategies"><span>the Multi-tenancy chapter</span></a>.</p>
<div class="figure align-center" id="id3">
<a class="reference internal image-reference" href="_images/ERD_TpG.png"><img alt="A multi-tenant implementation" src="_images/ERD_TpG.png" /></a>
<p class="caption"><span class="caption-text"><em>An example multi-tenant application</em></span></p>
</div>
<p>To recap: The &#8220;Lightning Banking&#8221; application must support multiple tenants for each of the bank&#8217;s subsidiaries (&#8220;Bank of A&#8221;, &#8220;Bank of B&#8221;, etc), each modeled as an Organization resource.</p>
<p>Each of these Organization resources has a Group as its Account Store. This means that all of the users for that Tenant will be represented by Account resources that are mapped to that subsidiary&#8217;s Organization as well as its Group.</p>
<p>Claire is a customer Bank of A, so her Account resource is associated with the &#8220;Bank of A&#8221; Organization and Group resources.</p>
<p>Now our banking application has roles that we want applied across all of its tenants, such as &#8220;User&#8221; and &#8220;Application Administrator&#8221;. Modeling these can be accomplished by creating Groups for them, and then associating the appropriate Accounts with them. Voila, application-wide roles.</p>
<p>So Claire is a customer at the Bank of A, and is associated with the &#8220;Bank of A&#8221; tenant Group. But she is also just a regular user, so she is also associated with the &#8220;User&#8221; role Group. We have a separate user Esther, who is a customer of Bank of B. She is associated with the Bank of B tenant Group, but because she has the same role as Claire, she is associated with the same role Group.</p>
<p>The actual authorization checks that you do here are irrelevant, so you can still use what we have called &#8220;simple authorization&#8221; with these roles, or you can use permission-based authorization checks.</p>
<p>More information about the APIs that allow you to create, retrieve and search an Application&#8217;s Groups can be found in the the <a class="reference internal" href="accnt_mgmt.html#group-mgmt"><span>Account Management section</span></a>, while more information about multi-Tenancy can be found <a class="reference internal" href="multitenancy.html#multitenancy"><span>in the multi-tenancy section</span></a>.</p>
</div>
</div>
<div class="section" id="using-permissions">
<h3>5.2.2. Using Permissions<a class="headerlink" href="#using-permissions" title="Permalink to this headline"></a></h3>
<p>If you have decided that your application requires the more advanced authorization modeling possible with permissions, then the first question with every permission is whether it will be tied to an Account or a Group.</p>
<p><strong>User-unique permissions:</strong> Any permissions that are are unique to a user should be tied to that user&#8217;s Account resource.</p>
<p><strong>Role permissions:</strong> Permissions that will be shared among a number of users are better bundled together in roles, that is Groups, which many individual Accounts while be associated to.</p>
<p>The next question is: what will your permissions look like?</p>
<div class="section" id="how-to-model-fine-grained-permissions">
<span id="custom-perms"></span><h4>How to Model Fine-Grained Permissions<a class="headerlink" href="#how-to-model-fine-grained-permissions" title="Permalink to this headline"></a></h4>
<p>Stormpath also gives you an enormous amount of flexibility with what these permissions look like. A permission in Stormpath can be as simple as:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;create_admin&quot;</span><span class="p">:</span> <span class="s2">&quot;yes&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Or as complex as:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;create-admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;This permission allows the account to create an admin&quot;</span>
    <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;read&quot;</span><span class="p">,</span>
    <span class="nt">&quot;resource&quot;</span><span class="p">:</span> <span class="s2">&quot;/admin/create&quot;</span><span class="p">,</span>
    <span class="nt">&quot;effect&quot;</span><span class="p">:</span> <span class="s2">&quot;allow&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>How is this flexibility possible? Custom Data.</p>
<p>As mentioned earlier, Stormpath resources like Accounts and Groups are created along with a linked <a class="reference internal" href="reference.html#ref-customdata"><span>customData</span></a> resource. This resource is very useful for implementing both Account permissions and role (AKA Group) permissions. Essentially, any user-level permissions are defined in a <code class="docutils literal"><span class="pre">customData</span></code> resource linked to a user Account, while any role-level permissions are defined in a <code class="docutils literal"><span class="pre">customData</span></code> resource linked to a role Group. This allows for Stormpath to model user-unique permissions as well as permissions inherited by virtue of a user having one (or more) roles.</p>
<p>Permissions in Stormpath can be modeled as an array inside the <code class="docutils literal"><span class="pre">customData</span></code> resource. They can be as simple as a key-value pair, or more complex objects. A user Account could have their user-unique permissions defined in a <code class="docutils literal"><span class="pre">customData</span></code> resource linked to from their Account. At the same time, their Account would be linked to the application-wide &#8220;Admin&#8221; Group which would have its own linked <code class="docutils literal"><span class="pre">customData</span></code> resource that would contain definitions of the permissions of all the users with the Admin role in your application.</p>
<p>For more information about adding customData to a user, please see the <a class="reference internal" href="accnt_mgmt.html#add-user-customdata"><span>Account Management section</span></a>.</p>
<p>To find out all the different things you can do with customData please see the <a class="reference internal" href="accnt_mgmt.html#add-user-customdata"><span>Account Custom Data Section</span></a>.</p>
</div>
<div class="section" id="checking-user-and-role-permissions">
<h4>Checking User and Role Permissions<a class="headerlink" href="#checking-user-and-role-permissions" title="Permalink to this headline"></a></h4>
<p>Since authorization enforcement is handled by <a class="reference external" href="https://docs.stormpath.com/php/">one of Stormpath&#8217;s PHP integrations</a>, the primary usefulness of the PHP SDK is in retrieving a user&#8217;s permissions.</p>
<p>These permissions can either be found in the custom_data tied a the user (i.e. the Account resource) or to their role (i.e. a Group resource associated to the Account).</p>
<div class="section" id="checking-user-permissions">
<h5>Checking User Permissions<a class="headerlink" href="#checking-user-permissions" title="Permalink to this headline"></a></h5>
<p>To check a user&#8217;s unique permissions, you must retrieve their Account&#8217;s Custom Data. You can do this in one of two ways:</p>
<ol class="arabic simple">
<li>You can retrieve the Account along with the expanded Custom Data, by sending a request:</li>
</ol>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$account</span> <span class="o">=</span> <span class="nx">\Stormpath\Resource\Account</span><span class="o">::</span><span class="na">get</span><span class="p">(</span>
    <span class="nv">$accountHref</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;expand&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;customData&#39;</span><span class="p">]</span>
<span class="p">);</span>
</pre></div>
</div>
<p>This will return the Account resource along with the customData:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nx">object</span><span class="p">(</span><span class="nx">Stormpath\Resource\Account</span><span class="p">)</span>
    <span class="k">public</span> <span class="s1">&#39;href&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;https://api.stormpath.com/v1/accounts/4aOb1hLvLHIB0PWObEnydJ&#39;</span>
    <span class="k">public</span> <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;jlpicard&#39;</span>
    <span class="k">public</span> <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;capt@enterprise.com&#39;</span>
    <span class="k">public</span> <span class="s1">&#39;givenName&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;Jean-Luc&#39;</span>
    <span class="k">public</span> <span class="s1">&#39;middleName&#39;</span> <span class="o">=&gt;</span> <span class="k">null</span>
    <span class="k">public</span> <span class="s1">&#39;surname&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;Picard&#39;</span>
    <span class="k">public</span> <span class="s1">&#39;fullName&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;Jean-Luc Picard&#39;</span>
    <span class="k">public</span> <span class="s1">&#39;status&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;ENABLED&#39;</span>
    <span class="k">public</span> <span class="s1">&#39;createdAt&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;2016-03-17T18:53:50.875Z&#39;</span>
    <span class="k">public</span> <span class="s1">&#39;modifiedAt&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;2016-03-17T18:53:50.875Z&#39;</span>
    <span class="k">public</span> <span class="s1">&#39;emailVerificationToken&#39;</span> <span class="o">=&gt;</span> <span class="k">null</span>

    <span class="k">public</span> <span class="s1">&#39;customData&#39;</span> <span class="o">=&gt;</span>
        <span class="nx">object</span><span class="p">(</span><span class="k">stdClass</span><span class="p">)</span>
        <span class="k">public</span> <span class="s1">&#39;href&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;https://api.stormpath.com/v1/accounts/4aOb1hLvLHIB0PWObEnydJ/customData&#39;</span>
        <span class="k">public</span> <span class="s1">&#39;createdAt&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s2">&quot;2016-03-17T19:20:04.655Z&quot;</span>
        <span class="k">public</span> <span class="s1">&#39;modifiedAt&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s2">&quot;2016-03-17T19:20:04.655Z&quot;</span>
        <span class="k">public</span> <span class="s1">&#39;crew_quarters&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s2">&quot;&amp;nbsp;9-3601&quot;</span>
        <span class="k">public</span> <span class="s1">&#39;lock_override&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s2">&quot;all&quot;</span>
        <span class="k">public</span> <span class="s1">&#39;command_bridge&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">[</span>
            <span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s2">&quot;vessel:bridge&quot;</span>
            <span class="p">[</span><span class="s1">&#39;identifier&#39;</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s2">&quot;NCC-1701-D&quot;</span>
            <span class="p">[</span><span class="s1">&#39;action&#39;</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s2">&quot;lockout&quot;</span>
            <span class="p">[</span><span class="s1">&#39;control_key&#39;</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="s2">&quot;173467321476C32789777643T732V73117888732476789764376&quot;</span>
        <span class="p">]</span>

    <span class="k">public</span> <span class="s1">&#39;providerData&#39;</span> <span class="o">=&gt;</span>
        <span class="nx">object</span><span class="p">(</span><span class="k">stdClass</span><span class="p">)</span>
        <span class="k">public</span> <span class="s1">&#39;href&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;https://api.stormpath.com/v1/accounts/4aOb1hLvLHIB0PWObEnydJ/providerData&#39;</span>

    <span class="k">public</span> <span class="s1">&#39;directory&#39;</span> <span class="o">=&gt;</span>
        <span class="nx">object</span><span class="p">(</span><span class="k">stdClass</span><span class="p">)</span>
        <span class="k">public</span> <span class="s1">&#39;href&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;https://api.stormpath.com/v1/directories/2bofMIN0rJlxgefvFYloQz&#39;</span>

    <span class="k">public</span> <span class="s1">&#39;tenant&#39;</span> <span class="o">=&gt;</span>
        <span class="nx">object</span><span class="p">(</span><span class="k">stdClass</span><span class="p">)</span>
        <span class="k">public</span> <span class="s1">&#39;href&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;https://api.stormpath.com/v1/tenants/6g1ZmmHTnCNWgdJqCD46ZO&#39;</span>

    <span class="k">public</span> <span class="s1">&#39;groups&#39;</span> <span class="o">=&gt;</span>
        <span class="nx">object</span><span class="p">(</span><span class="k">stdClass</span><span class="p">)</span>
        <span class="k">public</span> <span class="s1">&#39;href&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;https://api.stormpath.com/v1/accounts/4aOb1hLvLHIB0PWObEnydJ/groups&#39;</span>

    <span class="k">public</span> <span class="s1">&#39;applications&#39;</span> <span class="o">=&gt;</span>
        <span class="nx">object</span><span class="p">(</span><span class="k">stdClass</span><span class="p">)</span>
        <span class="k">public</span> <span class="s1">&#39;href&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;https://api.stormpath.com/v1/accounts/4aOb1hLvLHIB0PWObEnydJ/applications&#39;</span>

    <span class="k">public</span> <span class="s1">&#39;groupMemberships&#39;</span> <span class="o">=&gt;</span>
        <span class="nx">object</span><span class="p">(</span><span class="k">stdClass</span><span class="p">)</span>
        <span class="k">public</span> <span class="s1">&#39;href&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;https://api.stormpath.com/v1/accounts/4aOb1hLvLHIB0PWObEnydJ/groupMemberships&#39;</span>

    <span class="k">public</span> <span class="s1">&#39;apiKeys&#39;</span> <span class="o">=&gt;</span>
        <span class="nx">object</span><span class="p">(</span><span class="k">stdClass</span><span class="p">)</span>
        <span class="k">public</span> <span class="s1">&#39;href&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;https://api.stormpath.com/v1/accounts/4aOb1hLvLHIB0PWObEnydJ/apiKeys&#39;</span>

    <span class="k">public</span> <span class="s1">&#39;accessTokens&#39;</span> <span class="o">=&gt;</span>
        <span class="nx">object</span><span class="p">(</span><span class="k">stdClass</span><span class="p">)</span>
        <span class="k">public</span> <span class="s1">&#39;href&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;https://api.stormpath.com/v1/accounts/4aOb1hLvLHIB0PWObEnydJ/accessTokens&#39;</span>

    <span class="k">public</span> <span class="s1">&#39;refreshTokens&#39;</span> <span class="o">=&gt;</span>
        <span class="nx">object</span><span class="p">(</span><span class="k">stdClass</span><span class="p">)</span>
        <span class="k">public</span> <span class="s1">&#39;href&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;https://api.stormpath.com/v1/accounts/4aOb1hLvLHIB0PWObEnydJ/refreshTokens&#39;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Or you can retrieve only the Custom Data:</li>
</ol>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$account</span> <span class="o">=</span> <span class="nx">\Stormpath\Resource\Account</span><span class="o">::</span><span class="na">get</span><span class="p">(</span>
    <span class="nv">$accountHref</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;expand&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;customData&#39;</span><span class="p">]</span>
<span class="p">);</span>

<span class="nv">$account</span><span class="o">-&gt;</span><span class="na">customData</span><span class="p">;</span>
</pre></div>
</div>
<p>Which would return only this:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nx">object</span><span class="p">(</span><span class="nx">Stormpath\Resource\CustomData</span><span class="p">)</span>
    <span class="k">public</span> <span class="s1">&#39;href&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s1">&#39;https://api.stormpath.com/v1/accounts/4aOb1hLvLHIB0PWObEnydJ/customData&#39;</span>
    <span class="k">public</span> <span class="s1">&#39;createdAt&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s2">&quot;2016-03-17T19:20:04.655Z&quot;</span>
    <span class="k">public</span> <span class="s1">&#39;modifiedAt&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s2">&quot;2016-03-17T19:20:04.655Z&quot;</span>
    <span class="k">public</span> <span class="s1">&#39;crew_quarters&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s2">&quot;&amp;nbsp;9-3601&quot;</span>
    <span class="k">public</span> <span class="s1">&#39;lock_override&#39;</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s2">&quot;all&quot;</span>
    <span class="k">public</span> <span class="s1">&#39;command_bridge&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s2">&quot;vessel:bridge&quot;</span>
        <span class="p">[</span><span class="s1">&#39;identifier&#39;</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s2">&quot;NCC-1701-D&quot;</span>
        <span class="p">[</span><span class="s1">&#39;action&#39;</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">string</span> <span class="s2">&quot;lockout&quot;</span>
        <span class="p">[</span><span class="s1">&#39;control_key&#39;</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="s2">&quot;173467321476C32789777643T732V73117888732476789764376&quot;</span>
    <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="checking-role-permissions">
<h5>Checking Role Permissions<a class="headerlink" href="#checking-role-permissions" title="Permalink to this headline"></a></h5>
<p>This would work in much the same way as checking the permissions for a user&#8217;s Account. You would first need to retrieve the Account&#8217;s associated Groups:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$accountGroups</span> <span class="o">=</span> <span class="nv">$account</span><span class="o">-&gt;</span><span class="na">groups</span><span class="p">;</span>
</pre></div>
</div>
<p>From here you can retrieve the Groups customData in the same way as you did with users.</p>
</div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="multitenancy.html" class="btn btn-neutral float-right" title="6. Multi-Tenancy with Stormpath" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="auth_n.html" class="btn btn-neutral" title="4. Authenticating Accounts with Stormpath" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Stormpath, Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/javascript_for_java.js"></script>
      <script type="text/javascript" src="_static/langpicker.js"></script>
      <script type="text/javascript" src="_static/scrollspy.js"></script>
      <script type="text/javascript" src="_static/gumshoe.min.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

  

</body>
</html>