

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Login &mdash; Stormpath Rails Documentation 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="author" title="About these documents"
              href="about.html"/>
    <link rel="top" title="Stormpath Rails Documentation 0.1 documentation" href="index.html"/>
        <link rel="next" title="Social Login" href="social_login.html"/>
        <link rel="prev" title="Registration" href="registration.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

  
  <script src="https://cdn.optimizely.com/js/225847041.js"></script>

  
  <script>
  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
  n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
  document,'script','https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '986262161469311');
  fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=986262161469311&ev=PageView&noscript=1"
  /></noscript>
</head>

<body class="wy-body-for-nav" role="document">

  
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NQZZFW"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NQZZFW');</script>

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Stormpath Rails Documentation
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="about.html#what-is-stormpath">What is Stormpath?</a></li>
<li class="toctree-l2"><a class="reference internal" href="about.html#what-is-the-stormpath-rails-gem">What is the Stormpath Rails Gem?</a></li>
<li class="toctree-l2"><a class="reference internal" href="about.html#who-should-use-stormpath">Who should use Stormpath?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#create-a-stormpath-account">Create a Stormpath Account</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#create-an-api-key-pair">Create an API Key Pair</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#find-your-stormpath-application">Find Your Stormpath Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#install-the-gem">Install the Gem</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#routes-configuration">Routes configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#start-your-server">Start your server</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#example-applications">Example Applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#default-features">Default Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#disabling-features">Disabling Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#stormpath-client-options">Stormpath Client Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#stormpath-application">Stormpath Application</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user_data.html">User Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user_data.html#current-account">current_account</a><ul>
<li class="toctree-l3"><a class="reference internal" href="user_data.html#resolving-the-current-user-account">Resolving The Current User(Account)</a></li>
<li class="toctree-l3"><a class="reference internal" href="user_data.html#forcing-authentication">Forcing Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="user_data.html#modifying-the-account">Modifying The Account</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user_data.html#custom-data">Custom Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_data.html#automatic-expansion">Automatic Expansion</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_data.html#current-user-json-api">Current User JSON API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#cookie-authentication">Cookie Authentication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="authentication.html#setting-token-expiration-time">Setting Token Expiration Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="authentication.html#configuring-cookie-flags">Configuring Cookie Flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="authentication.html#token-validation-strategy">Token Validation Strategy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#http-basic-authentication">HTTP Basic Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#oauth2-client-credentials">OAuth2 Client Credentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#oauth2-password-grant">OAuth2 Password Grant</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="registration.html">Registration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="registration.html#configuration-options">Configuration Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#modifying-default-fields">Modifying Default Fields</a><ul>
<li class="toctree-l3"><a class="reference internal" href="registration.html#configure-first-name-and-last-name-as-optional">Configure First Name and Last Name as Optional</a></li>
<li class="toctree-l3"><a class="reference internal" href="registration.html#disabling-first-name-and-last-name">Disabling First Name and Last Name</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#creating-custom-fields">Creating Custom Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#changing-field-order">Changing Field Order</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#password-strength-rules">Password Strength Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#email-verification">Email Verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#auto-login">Auto Login</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#overriding-registration">Overriding Registration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="registration.html#controllers">Controllers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#routes">Routes</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#views">Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#json-registration-api">JSON Registration API</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Login</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#next-uri">Next URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#form-customization">Form Customization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#controller-private-helper-methods">Controller private &amp; helper methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#json-login-api">JSON Login API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#overriding-login">Overriding Login</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#controllers">Controllers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#routes">Routes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#views">Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-id-site">Using ID Site</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id-site-configuration">ID Site Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="social_login.html">Social Login</a><ul>
<li class="toctree-l2"><a class="reference internal" href="social_login.html#facebook-login">Facebook Login</a><ul>
<li class="toctree-l3"><a class="reference internal" href="social_login.html#create-a-facebook-app">Create a Facebook App</a></li>
<li class="toctree-l3"><a class="reference internal" href="social_login.html#specify-allowed-urls">Specify Allowed URLs</a></li>
<li class="toctree-l3"><a class="reference internal" href="social_login.html#create-a-facebook-directory">Create a Facebook Directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="social_login.html#test-it-out">Test it Out</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="social_login.html#google-login">Google Login</a><ul>
<li class="toctree-l3"><a class="reference internal" href="social_login.html#create-a-google-project">Create a Google Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="social_login.html#enable-google-login">Enable Google Login</a></li>
<li class="toctree-l3"><a class="reference internal" href="social_login.html#create-oauth-credentials">Create OAuth Credentials</a></li>
<li class="toctree-l3"><a class="reference internal" href="social_login.html#create-a-google-directory">Create a Google Directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="social_login.html#id2">Test it Out</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="social_login.html#linkedin-login">LinkedIn Login</a><ul>
<li class="toctree-l3"><a class="reference internal" href="social_login.html#create-a-linkedin-application">Create a LinkedIn Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="social_login.html#enable-linkedin-permissions">Enable LinkedIn Permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="social_login.html#create-a-linkedin-directory">Create a LinkedIn Directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="social_login.html#id3">Test it Out</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="social_login.html#github-login">Github Login</a><ul>
<li class="toctree-l3"><a class="reference internal" href="social_login.html#create-a-github-app">Create a Github App</a></li>
<li class="toctree-l3"><a class="reference internal" href="social_login.html#create-a-github-directory">Create a Github Directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="social_login.html#id4">Test it Out</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="logout.html">Logout</a><ul>
<li class="toctree-l2"><a class="reference internal" href="logout.html#configuration-options">Configuration Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="logout.html#overriding-logout">Overriding Logout</a><ul>
<li class="toctree-l3"><a class="reference internal" href="logout.html#controllers">Controllers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="logout.html#routes">Routes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="password_reset.html">Password Reset</a><ul>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#enable-the-workflow">Enable the Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#adjust-workflow-in-config-file">Adjust Workflow in Config File</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#using-the-workflow">Using the Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#auto-login">Auto Login</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="devise_import.html">Import Data from Devise</a><ul>
<li class="toctree-l2"><a class="reference internal" href="devise_import.html#default-configuration">Default Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="devise_import.html#new-application-and-directory">New Application and Directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="devise_import.html#custom-account-data">Custom Account Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="devise_import.html#migration-process">Migration Process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="templates.html">Templates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="templates.html#default-views">Default Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="templates.html#custom-views">Custom Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="templates.html#view-variables">View Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="templates.html#response-variables">Response Variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Getting Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributors.html">Contributors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributors.html#developers">Developers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contributors.html#nenad-nikolic">Nenad Nikolić</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributors.html#damir-svrtan">Damir Svrtan</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributors.html#marko-cilimkovic">Marko Ćilimković</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a><ul>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-2-5-1">Version 2.5.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-2-5-0">Version 2.5.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-2-4-0">Version 2.4.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-2-3-1">Version 2.3.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-2-3-0">Version 2.3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-2-2-0">Version 2.2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-2-1-0">Version 2.1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-2-0-2">Version 2.0.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-2-0-1">Version 2.0.1</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Stormpath Rails Documentation</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 







<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Login</li>
    <li class="wy-breadcrumbs-aside">
      
          
          <a href="_sources/login.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="login">
<span id="id1"></span><h1>Login<a class="headerlink" href="#login" title="Permalink to this headline">¶</a></h1>
<p>By default this gem will serve an HTML login page at <code class="docutils literal"><span class="pre">/login</span></code>.  You can
change this URI with the <code class="docutils literal"><span class="pre">web.login.uri</span></code> option.  You can disable this feature
entirely by setting <code class="docutils literal"><span class="pre">web.login.enabled</span></code> to <code class="docutils literal"><span class="pre">false</span></code>.</p>
<p>To view the default page in your example application, navigate to this URL:</p>
<p><a class="reference external" href="http://localhost:3000/login">http://localhost:3000/login</a></p>
<p>If the login attempt is successful, we will send the user to the Next URI and
create the proper session cookies.</p>
<div class="section" id="next-uri">
<h2>Next URI<a class="headerlink" href="#next-uri" title="Permalink to this headline">¶</a></h2>
<p>The form will render with two fields for login and password, and this form
will be posted to <code class="docutils literal"><span class="pre">/login</span></code>.  If login is successful, we will redirect the user
to <code class="docutils literal"><span class="pre">/</span></code>.  If you wish to change this, use the <code class="docutils literal"><span class="pre">nextUri</span></code> config option:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="nx">code</span><span class="o">-</span><span class="nx">block</span><span class="o">::</span> <span class="nx">yaml</span>
</pre></div>
</div>
<blockquote>
<div><dl class="docutils">
<dt>web:</dt>
<dd><dl class="first last docutils">
<dt>login:</dt>
<dd>enabled: true,
nextUri: &#8220;/dashboard&#8221;</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="form-customization">
<h2>Form Customization<a class="headerlink" href="#form-customization" title="Permalink to this headline">¶</a></h2>
<p>The label and placeholder values can be changed by modifying the login form
field configuration:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span>web:
  login:
    form:
      fields:
        login:
          label: &#39;Your Username or Email&#39;,
          placeholder: &#39;email@trustyapp.com&#39;
        password:
          label: &#39;Your super-secure PAssw0rd!&#39;
</pre></div>
</div>
</div>
<div class="section" id="controller-private-helper-methods">
<h2>Controller private &amp; helper methods<a class="headerlink" href="#controller-private-helper-methods" title="Permalink to this headline">¶</a></h2>
<p>The Application Controller gets the <code class="docutils literal"><span class="pre">Stormpath::Rails::Controller</span></code> module included by default. The module provides 4 private controller methods:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">current_account</span></code> - get the current account</li>
<li><code class="docutils literal"><span class="pre">signed_in?</span></code> - check if the user is signed in.</li>
<li><code class="docutils literal"><span class="pre">require_authentication!</span></code> - a before action to stop unauthenticated access.</li>
<li><code class="docutils literal"><span class="pre">require_no_authentication!</span></code> - a before action to stop authenticated access (a logged in user shouldn&#8217;t be able to see the login form).</li>
</ul>
<p>By default, the <code class="docutils literal"><span class="pre">current_account</span></code> and <code class="docutils literal"><span class="pre">signed_in?</span></code> are marked as helper_methods and you can use them in your views.</p>
<p>If you wish to add these methods to a controller that doesn&#8217;t inherit from the ApplicationController, just include the <code class="docutils literal"><span class="pre">Stormpath::Rails::Controller</span></code> module in that controller as well.</p>
</div>
<div class="section" id="json-login-api">
<span id="id2"></span><h2>JSON Login API<a class="headerlink" href="#json-login-api" title="Permalink to this headline">¶</a></h2>
<p>If you want to make a login attempt from a front-end application (Angular, React),
simply post a JSON body to the <code class="docutils literal"><span class="pre">/login</span></code> endpoint, with the following format:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;login&quot;</span><span class="o">:</span> <span class="s2">&quot;foo@bar.com&quot;</span><span class="p">,</span>
  <span class="s2">&quot;password&quot;</span><span class="o">:</span> <span class="s2">&quot;myPassword&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the login attempt is successful, you will receive a 200 OK response and the
session cookies will be set on the response.  If there is an error we will
send a 400 status with an error message in the body.</p>
<p>If you make a GET request to the login endpoint, with <code class="docutils literal"><span class="pre">Accept:</span>
<span class="pre">application/json</span></code>, we will send you a JSON view model that describes the login
form and the social account stores that are mapped to your Stormpath
Application.  Here is an example view model that shows you an application that
has a default login form, and a mapped Google directory:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;accountStores&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;stormpath-rails google&quot;</span><span class="p">,</span>
      <span class="s2">&quot;href&quot;</span><span class="o">:</span> <span class="s2">&quot;https://api.stormpath.com/v1/directories/gc0Ty90yXXk8ifd2QPwt&quot;</span><span class="p">,</span>
      <span class="s2">&quot;provider&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;providerId&quot;</span><span class="o">:</span> <span class="s2">&quot;google&quot;</span><span class="p">,</span>
        <span class="s2">&quot;href&quot;</span><span class="o">:</span> <span class="s2">&quot;https://api.stormpath.com/v1/directories/gc0Ty90yXXk8ifd2QPwt/provider&quot;</span><span class="p">,</span>
        <span class="s2">&quot;clientId&quot;</span><span class="o">:</span> <span class="s2">&quot;422132428-9auxxujR9uku8I5au.apps.googleusercontent.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;scope&quot;</span><span class="o">:</span> <span class="s2">&quot;email profile&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&quot;form&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;fields&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">&quot;label&quot;</span><span class="o">:</span> <span class="s2">&quot;Username or Email&quot;</span><span class="p">,</span>
        <span class="s2">&quot;placeholder&quot;</span><span class="o">:</span> <span class="s2">&quot;Username or Email&quot;</span><span class="p">,</span>
        <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;login&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;label&quot;</span><span class="o">:</span> <span class="s2">&quot;Password&quot;</span><span class="p">,</span>
        <span class="s2">&quot;placeholder&quot;</span><span class="o">:</span> <span class="s2">&quot;Password&quot;</span><span class="p">,</span>
        <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;password&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;password&quot;</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="overriding-login">
<h2>Overriding Login<a class="headerlink" href="#overriding-login" title="Permalink to this headline">¶</a></h2>
<div class="section" id="controllers">
<h3>Controllers<a class="headerlink" href="#controllers" title="Permalink to this headline">¶</a></h3>
<p>Since Stormpath controllers are highly configurable, they have lots of configuration code and are not written in a traditional way.</p>
<p>A LoginController would usually have two actions - new &amp; create, however in Stormpath-Rails they are separated into two single action controllers - <code class="docutils literal"><span class="pre">Stormpath::Rails::Login::NewController</span></code> and <code class="docutils literal"><span class="pre">Stormpath::Rails::Login::CreateController</span></code>.
They both respond to a <code class="docutils literal"><span class="pre">call</span></code> method (action).</p>
<p>To override a Stormpath controller, first you need to subclass it:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CreateSessionController</span> <span class="o">&lt;</span> <span class="no">Stormpath</span><span class="o">::</span><span class="no">Rails</span><span class="o">::</span><span class="no">Login</span><span class="o">::</span><span class="no">CreateController</span>
<span class="k">end</span>
</pre></div>
</div>
<p>and update the routes to point to your new controller:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">Rails</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">stormpath_rails_routes</span><span class="p">(</span><span class="ss">actions</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;login#create&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;create_session#call&#39;</span>
  <span class="p">})</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="routes">
<h2>Routes<a class="headerlink" href="#routes" title="Permalink to this headline">¶</a></h2>
<p>To override routes (while using Stormpath default controllers), please use the configuration file <code class="docutils literal"><span class="pre">config/stormpath.yml</span></code> and override them there.
As usual, to see what the routes are, run <em>rake routes</em>.</p>
</div>
<div class="section" id="views">
<h2>Views<a class="headerlink" href="#views" title="Permalink to this headline">¶</a></h2>
<p>You can use the Stormpath views generator to copy the default views to your application for modification:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">rails</span> <span class="n">generate</span> <span class="ss">stormpath</span><span class="p">:</span><span class="n">views</span>
</pre></div>
</div>
<p>which generates these files:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">stormpath</span><span class="o">/</span><span class="nx">rails</span><span class="o">/</span><span class="nx">layouts</span><span class="o">/</span><span class="nx">stormpath</span><span class="p">.</span><span class="nx">html</span><span class="p">.</span><span class="nx">erb</span>

<span class="nx">stormpath</span><span class="o">/</span><span class="nx">rails</span><span class="o">/</span><span class="nx">login</span><span class="o">/</span><span class="k">new</span><span class="p">.</span><span class="nx">html</span><span class="p">.</span><span class="nx">erb</span>
<span class="nx">stormpath</span><span class="o">/</span><span class="nx">rails</span><span class="o">/</span><span class="nx">login</span><span class="o">/</span><span class="nx">_form</span><span class="p">.</span><span class="nx">html</span><span class="p">.</span><span class="nx">erb</span>

<span class="nx">stormpath</span><span class="o">/</span><span class="nx">rails</span><span class="o">/</span><span class="nx">register</span><span class="o">/</span><span class="k">new</span><span class="p">.</span><span class="nx">html</span><span class="p">.</span><span class="nx">erb</span>
<span class="nx">stormpath</span><span class="o">/</span><span class="nx">rails</span><span class="o">/</span><span class="nx">register</span><span class="o">/</span><span class="nx">_form</span><span class="p">.</span><span class="nx">html</span><span class="p">.</span><span class="nx">erb</span>

<span class="nx">stormpath</span><span class="o">/</span><span class="nx">rails</span><span class="o">/</span><span class="nx">change_password</span><span class="o">/</span><span class="k">new</span><span class="p">.</span><span class="nx">html</span><span class="p">.</span><span class="nx">erb</span>

<span class="nx">stormpath</span><span class="o">/</span><span class="nx">rails</span><span class="o">/</span><span class="nx">forgot_password</span><span class="o">/</span><span class="k">new</span><span class="p">.</span><span class="nx">html</span><span class="p">.</span><span class="nx">erb</span>

<span class="nx">stormpath</span><span class="o">/</span><span class="nx">rails</span><span class="o">/</span><span class="nx">shared</span><span class="o">/</span><span class="nx">_input</span><span class="p">.</span><span class="nx">html</span><span class="p">.</span><span class="nx">erb</span>

<span class="nx">stormpath</span><span class="o">/</span><span class="nx">rails</span><span class="o">/</span><span class="nx">verify_email</span><span class="o">/</span><span class="k">new</span><span class="p">.</span><span class="nx">html</span><span class="p">.</span><span class="nx">erb</span>
</pre></div>
</div>
</div>
<div class="section" id="using-id-site">
<h2>Using ID Site<a class="headerlink" href="#using-id-site" title="Permalink to this headline">¶</a></h2>
<p>Stormpath provides a hosted login application, known as ID Site.  This feature
allows you to redirect the user to our hosted application.  When the user
authenticates, they will be redirected back to your application with an identity
assertion.</p>
<p>This feature is useful if you don&#8217;t want to modify your application to serve
web pages or single page apps, and would rather have that hosted somewhere else.</p>
<p>ID site looks like this:</p>
<img alt="_images/id-site-login.png" src="_images/id-site-login.png" />
<div class="section" id="id-site-configuration">
<h3>ID Site Configuration<a class="headerlink" href="#id-site-configuration" title="Permalink to this headline">¶</a></h3>
<p>If you wish to use the ID Site feature, you will need to log in to the
<a class="reference external" href="https://api.stormpath.com">Stormpath Admin Console</a> and configure the settings.  You need to change the
<strong>Authorized Redirect Uri</strong> setting and set it to
<code class="docutils literal"><span class="pre">http://localhost:3000/id_site_result</span></code> in order to instruct Stormpath about the resource that
handles all ID Site requests from Stormpath to your application. For example, if you want to support logging out
of your application via ID Site, then you need to set the route to which you want to be redirected after a successful logout:</p>
<img alt="_images/id-site-stormpath-config.png" src="_images/id-site-stormpath-config.png" />
<p>Then you want to enable ID Site in your rails stormpath configuration:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">web</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">idSite</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="l l-Scalar l-Scalar-Plain">loginUri</span><span class="p p-Indicator">:</span> <span class="s">&quot;&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">forgotUri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/#/forgot&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">registerUri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/#/register&quot;</span>
</pre></div>
</div>
<p>When ID Site is enabled, any request for <code class="docutils literal"><span class="pre">/login</span></code> or <code class="docutils literal"><span class="pre">/register</span></code> will cause a
redirect to ID Site.  When the user is finished at ID Site they will be
redirected to <cite>/id_site_result</cite> on your application.  Our gem will handle
this request, and then redirect the user to the <code class="docutils literal"><span class="pre">nextUri</span></code>.</p>
<p>For more information about how to use and customize the ID site, please see
this documentation:</p>
<p><a class="reference external" href="http://docs.stormpath.com/guides/using-id-site/">http://docs.stormpath.com/guides/using-id-site/</a></p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="social_login.html" class="btn btn-neutral float-right" title="Social Login" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="registration.html" class="btn btn-neutral" title="Registration" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Stormpath, Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
   
  <script src="//cdn.optimizely.com/js/225847041.js"></script>


  

</body>
</html>