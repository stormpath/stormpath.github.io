

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tutorial &mdash; Stormpath Spring WebMVC Integration 1.5.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="about.html"/>
    <link rel="top" title="Stormpath Spring WebMVC Integration 1.5.0 documentation" href="index.html"/>
        <link rel="next" title="Configuration" href="config.html"/>
        <link rel="prev" title="Quickstart" href="quickstart.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

  
  <script src="https://cdn.optimizely.com/js/225847041.js"></script>

  
  <script>
  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
  n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
  document,'script','https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '986262161469311');
  fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=986262161469311&ev=PageView&noscript=1"
  /></noscript>
</head>

<body class="wy-body-for-nav" role="document">

  
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NQZZFW"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NQZZFW');</script>

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Stormpath Spring WebMVC Integration
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="about.html#what-is-stormpath">What is Stormpath?</a></li>
<li class="toctree-l2"><a class="reference internal" href="about.html#what-is-the-project">What is the Stormpath Spring WebMVC Integration?</a></li>
<li class="toctree-l2"><a class="reference internal" href="about.html#who-should-use-stormpath">Who should use Stormpath?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#get-an-api-key">Get an API Key</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#add-the-project">Add the Stormpath Spring WebMVC Integration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="quickstart.html#spring-security">Spring Security</a><ul>
<li class="toctree-l4"><a class="reference internal" href="quickstart.html#disabling-spring-security">Disabling Spring Security</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#try-it">Try it!</a><ul>
<li class="toctree-l3"><a class="reference internal" href="quickstart.html#any-problems">Any Problems?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#get-an-api-key">Get an API Key</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spring-meet-stormpath">Spring: Meet Stormpath</a></li>
<li class="toctree-l2"><a class="reference internal" href="#some-access-controls">Some Access Controls</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spring-security-meet-stormpath">Spring Security: Meet Stormpath</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spring-security-refined">Spring Security Refined</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a-finer-grain-of-control">A Finer Grain of Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="#token-management">Token Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wrapping-up">Wrapping Up</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="config.html#no-config">No Config?</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#property-overrides">Property Overrides</a><ul>
<li class="toctree-l3"><a class="reference internal" href="config.html#security-considerations-passwords-and-secret-values">Security Considerations: Passwords and secret values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="config.html#bean-overrides">Bean Overrides</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#stormpath-client">Stormpath Client</a><ul>
<li class="toctree-l3"><a class="reference internal" href="config.html#api-key">API Key</a></li>
<li class="toctree-l3"><a class="reference internal" href="config.html#http-proxy">HTTP Proxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="config.html#authentication-scheme">Authentication Scheme</a></li>
<li class="toctree-l3"><a class="reference internal" href="config.html#caching">Caching</a></li>
<li class="toctree-l3"><a class="reference internal" href="config.html#usage">Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="config.html#stormpath-application">Stormpath Application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="config.html#id1">Usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="registration.html">Registration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="registration.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="registration.html#enabled">Enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="registration.html#uri">URI</a></li>
<li class="toctree-l3"><a class="reference internal" href="registration.html#next-uri">Next URI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="registration.html#next-query-parameter">Next Query Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="registration.html#view">View</a></li>
<li class="toctree-l3"><a class="reference internal" href="registration.html#autologin">AutoLogin</a></li>
<li class="toctree-l3"><a class="reference internal" href="registration.html#form-fields">Form Fields</a><ul>
<li class="toctree-l4"><a class="reference internal" href="registration.html#form-field-definitions">Form Field Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="registration.html#standard-form-fields">Standard Form Fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="registration.html#custom-form-fields">Custom Form Fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="registration.html#optional-form-fields">Optional Form Fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="registration.html#disabling-form-fields">Disabling Form Fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="registration.html#form-field-order">Form Field Order</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="registration.html#password-strength">Password Strength</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#email-verification">Email Verification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="registration.html#try-it">Try it!</a></li>
<li class="toctree-l3"><a class="reference internal" href="registration.html#verify-link-base-url">Verify Link Base URL</a></li>
<li class="toctree-l3"><a class="reference internal" href="registration.html#verify-next-uri">Verify Next URI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#internationalization-i18n">Internationalization (i18n)</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#pre-register-handler">Pre Register Handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#post-register-handler">Post Register Handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#events">Events</a><ul>
<li class="toctree-l3"><a class="reference internal" href="registration.html#registered-account">Registered Account</a></li>
<li class="toctree-l3"><a class="reference internal" href="registration.html#verified-account">Verified Account</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="login.html">Login</a><ul>
<li class="toctree-l2"><a class="reference internal" href="login.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#security-notice">Security Notice</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#uri">URI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="login.html#next-query-parameter">Next Query Parameter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="login.html#next-uri">Next URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#view">View</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#internationalization-i18n">Internationalization (i18n)</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#pre-login-handler">Pre Login Handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#post-login-handler">Post Login Handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#events">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#authentication-state">Authentication State</a><ul>
<li class="toctree-l3"><a class="reference internal" href="login.html#saving-authentication-state">Saving Authentication State</a></li>
<li class="toctree-l3"><a class="reference internal" href="login.html#cookie-storage">Cookie Storage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="login.html#cookie-config">Cookie Config</a></li>
<li class="toctree-l4"><a class="reference internal" href="login.html#jwt-creation">JWT Creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="login.html#disabling-cookie-storage">Disabling Cookie Storage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="login.html#custom-savers">Custom Savers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="login.html#spring-security">Spring Security</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="social.html">Social Login</a><ul>
<li class="toctree-l2"><a class="reference internal" href="social.html#facebook-login">Facebook Login</a><ul>
<li class="toctree-l3"><a class="reference internal" href="social.html#create-a-facebook-app">Create a Facebook App</a></li>
<li class="toctree-l3"><a class="reference internal" href="social.html#specify-allowed-urls">Specify Allowed URLs</a></li>
<li class="toctree-l3"><a class="reference internal" href="social.html#create-a-facebook-directory">Create a Facebook Directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="social.html#test-it-out">Test it Out</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="social.html#google-login">Google Login</a><ul>
<li class="toctree-l3"><a class="reference internal" href="social.html#create-a-google-project">Create a Google Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="social.html#enable-google-login">Enable Google Login</a></li>
<li class="toctree-l3"><a class="reference internal" href="social.html#create-oauth-credentials">Create OAuth Credentials</a></li>
<li class="toctree-l3"><a class="reference internal" href="social.html#create-a-google-directory">Create a Google Directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="social.html#id1">Test it Out</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="social.html#linkedin-login">LinkedIn Login</a><ul>
<li class="toctree-l3"><a class="reference internal" href="social.html#create-a-linkedin-application">Create a LinkedIn Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="social.html#enable-linkedin-permissions">Enable LinkedIn Permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="social.html#create-a-linkedin-directory">Create a LinkedIn Directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="social.html#id2">Test it Out</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="social.html#json-api">JSON API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="forgot-password.html">Forgot Password</a><ul>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#configure-the-workflow">Configure the Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#try-it">Try it!</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#forgot-uri">Forgot URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#forgot-next-uri">Forgot Next URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#forgot-view">Forgot View</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#change-password-uri">Change Password URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#change-password-next-uri">Change Password Next URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#change-password-view">Change Password View</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#i18n">i18n</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="logout.html">Logout</a><ul>
<li class="toctree-l2"><a class="reference internal" href="logout.html#uri">URI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="logout.html#next-query-parameter">Next Query Parameter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="logout.html#next-uri">Next URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="logout.html#events">Events</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="request-authentication.html">HTTP Request Authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="request-authentication.html#http-basic-authentication">HTTP Basic Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="request-authentication.html#token-authentication">Token Authentication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="request-authentication.html#get-a-token">Get a Token</a><ul>
<li class="toctree-l4"><a class="reference internal" href="request-authentication.html#curl">cURL</a></li>
<li class="toctree-l4"><a class="reference internal" href="request-authentication.html#html-form-and-ajax">HTML Form and AJAX</a></li>
<li class="toctree-l4"><a class="reference internal" href="request-authentication.html#origin-or-referer-required">Origin or Referer Required</a></li>
<li class="toctree-l4"><a class="reference internal" href="request-authentication.html#https-required">HTTPS Required</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="request-authentication.html#api-key-authentication">API Key Authentication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="request-authentication.html#determining-api-key-authentication">Determining API Key Authentication</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="request.html">Request Context</a><ul>
<li class="toctree-l2"><a class="reference internal" href="request.html#current-user-account">Current User Account</a><ul>
<li class="toctree-l3"><a class="reference internal" href="request.html#account-resolver">Account Resolver</a></li>
<li class="toctree-l3"><a class="reference internal" href="request.html#request-attributes">Request Attributes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="request.html#request-attribute-names">Request Attribute Names</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="request.html#http-servlet-request-api">HTTP Servlet Request API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="request.html#httpservletrequest-getremoteuser">HttpServletRequest getRemoteUser()</a></li>
<li class="toctree-l4"><a class="reference internal" href="request.html#httpservletrequest-getuserprincipal">HttpServletRequest getUserPrincipal()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="request.html#stormpath-application">Stormpath Application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="request.html#spring-autowiring">Spring autowiring</a></li>
<li class="toctree-l3"><a class="reference internal" href="request.html#application-resolver">Application Resolver</a></li>
<li class="toctree-l3"><a class="reference internal" href="request.html#id2">Request Attributes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="request.html#default-request-attribute-name">Default Request Attribute Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="request.html#custom-request-attribute-names">Custom Request Attribute Names</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="request.html#stormpath-client">Stormpath Client</a><ul>
<li class="toctree-l3"><a class="reference internal" href="request.html#id3">Spring autowiring</a></li>
<li class="toctree-l3"><a class="reference internal" href="request.html#client-resolver">Client Resolver</a></li>
<li class="toctree-l3"><a class="reference internal" href="request.html#id4">Request Attributes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="request.html#id5">Default Request Attribute Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="request.html#id6">Custom Request Attribute Names</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="i18n.html">Internationalization (i18n)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="i18n.html#languages">Languages</a></li>
<li class="toctree-l2"><a class="reference internal" href="i18n.html#request-locale">Request Locale</a></li>
<li class="toctree-l2"><a class="reference internal" href="i18n.html#view-templates">View Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="i18n.html#i18n-properties">i18n.properties</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="events.html">Events</a><ul>
<li class="toctree-l2"><a class="reference internal" href="events.html#requesteventlistener">RequestEventListener</a></li>
<li class="toctree-l2"><a class="reference internal" href="events.html#id2">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="events.html#listener-best-practices">Listener Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="events.html#spring-security">Spring Security</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="caching.html">Caching</a><ul>
<li class="toctree-l2"><a class="reference internal" href="caching.html#disable-caching">Disable Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="caching.html#cache-configuration">Cache Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="caching.html#cache-regions">Cache Regions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="caching.html#nonce-cache-region">Nonce Cache Region</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="idsite.html">ID Site</a><ul>
<li class="toctree-l2"><a class="reference internal" href="idsite.html#how-does-it-work">How Does It Work?</a></li>
<li class="toctree-l2"><a class="reference internal" href="idsite.html#enable-id-site">Enable ID Site</a></li>
<li class="toctree-l2"><a class="reference internal" href="idsite.html#configure-your-application">Configure Your Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="idsite.html#try-it">Try It!</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="views.html">Custom Views</a><ul>
<li class="toctree-l2"><a class="reference internal" href="views.html#jsp-views">JSP Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html#css">CSS</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html#internationalization-i18n">Internationalization (i18n)</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html#change-a-default-view">Change a Default View</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html#view-template">View Template</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a><ul>
<li class="toctree-l2"><a class="reference internal" href="appendix/default-stormpath-properties.html">Default Stormpath Properties</a><ul>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-client-baseurl">stormpath.client.baseUrl</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-client-connectiontimeout">stormpath.client.connectionTimeout</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-enabled">stormpath.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-client-apikey-id">stormpath.client.apiKey.id</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-client-apikey-secret">stormpath.client.apiKey.secret</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-client-apikey-file">stormpath.client.apiKey.file</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-client-apikey-fileidpropertyname">stormpath.client.apiKey.fileIdPropertyName</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-client-apikey-filesecretpropertyname">stormpath.client.apiKey.fileSecretPropertyName</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-client-cachemanager-enabled">stormpath.client.cacheManager.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-client-cachemanager-defaultttl">stormpath.client.cacheManager.defaultTtl</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-client-cachemanager-defaulttti">stormpath.client.cacheManager.defaultTti</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-application-href">stormpath.application.href</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-client-authenticationscheme">stormpath.client.authenticationScheme</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-client-proxy-host">stormpath.client.proxy.host</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-client-proxy-port">stormpath.client.proxy.port</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-client-proxy-username">stormpath.client.proxy.username</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-client-proxy-password">stormpath.client.proxy.password</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-account-jwt-ttl">stormpath.web.account.jwt.ttl</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-account-jwt-signaturealgorithm">stormpath.web.account.jwt.signatureAlgorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-authc-savers-cookie-enabled">stormpath.web.authc.savers.cookie.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-request-remoteuser-strategy">stormpath.web.request.remoteUser.strategy</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-request-userprincipal-strategy">stormpath.web.request.userPrincipal.strategy</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-request-client-attributenames">stormpath.web.request.client.attributeNames</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-request-application-attributenames">stormpath.web.request.application.attributeNames</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-csrf-token-enabled">stormpath.web.csrf.token.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-csrf-token-ttl">stormpath.web.csrf.token.ttl</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-csrf-token-name">stormpath.web.csrf.token.name</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-nonce-cache-name">stormpath.web.nonce.cache.name</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-stormpathfilter-enabled">stormpath.web.stormpathFilter.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-stormpathfilter-order">stormpath.web.stormpathFilter.order</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-stormpathfilter-urlpatterns">stormpath.web.stormpathFilter.urlPatterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-stormpathfilter-servletnames">stormpath.web.stormpathFilter.servletNames</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-stormpathfilter-dispatchertypes">stormpath.web.stormpathFilter.dispatcherTypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-stormpathfilter-matchafter">stormpath.web.stormpathFilter.matchAfter</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-head-view">stormpath.web.head.view</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-head-fragmentselector">stormpath.web.head.fragmentSelector</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-head-cssuris">stormpath.web.head.cssUris</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-head-extracssuris">stormpath.web.head.extraCssUris</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-login-enabled">stormpath.web.login.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-login-uri">stormpath.web.login.uri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-login-nexturi">stormpath.web.login.nextUri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-login-view">stormpath.web.login.view</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-forgotpassword-enabled">stormpath.web.forgotPassword.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-forgotpassword-uri">stormpath.web.forgotPassword.uri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-forgotpassword-nexturi">stormpath.web.forgotPassword.nextUri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-forgotpassword-view">stormpath.web.forgotPassword.view</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-enabled">stormpath.web.register.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-uri">stormpath.web.register.uri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-nexturi">stormpath.web.register.nextUri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-view">stormpath.web.register.view</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-verifyemail-enabled">stormpath.web.verifyEmail.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-verifyemail-uri">stormpath.web.verifyEmail.uri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-verifyemail-nexturi">stormpath.web.verifyEmail.nextUri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-verifyemail-view">stormpath.web.verifyEmail.view</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-logout-enabled">stormpath.web.logout.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-logout-uri">stormpath.web.logout.uri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-logout-nexturi">stormpath.web.logout.nextUri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-logout-invalidatehttpsession">stormpath.web.logout.invalidateHttpSession</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-changepassword-enabled">stormpath.web.changePassword.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-changepassword-uri">stormpath.web.changePassword.uri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-changepassword-nexturi">stormpath.web.changePassword.nextUri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-changepassword-view">stormpath.web.changePassword.view</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-oauth2-enabled">stormpath.web.oauth2.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-oauth2-uri">stormpath.web.oauth2.uri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-oauth2-origin-authorizer-originuris">stormpath.web.oauth2.origin.authorizer.originUris</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-idsite-enabled">stormpath.web.idSite.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-idsite-loginuri">stormpath.web.idSite.loginUri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-idsite-registeruri">stormpath.web.idSite.registerUri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-idsite-forgoturi">stormpath.web.idSite.forgotUri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-idsite-resulturi">stormpath.web.idSite.resultUri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-idsite-usesubdomain">stormpath.web.idSite.useSubdomain</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-idsite-showorganizationfield">stormpath.web.idSite.showOrganizationField</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-callback-enabled">stormpath.web.callback.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-callback-uri">stormpath.web.callback.uri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-application-domain">stormpath.web.application.domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#id2">stormpath.application.href</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-oauth2-password-validationstrategy">stormpath.web.oauth2.password.validationStrategy</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-accesstokencookie-name">stormpath.web.accessTokenCookie.name</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-accesstokencookie-httponly">stormpath.web.accessTokenCookie.httpOnly</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-accesstokencookie-secure">stormpath.web.accessTokenCookie.secure</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-accesstokencookie-path">stormpath.web.accessTokenCookie.path</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-accesstokencookie-domain">stormpath.web.accessTokenCookie.domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-accesstokencookie-maxage">stormpath.web.accessTokenCookie.maxAge</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-refreshtokencookie-name">stormpath.web.refreshTokenCookie.name</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-refreshtokencookie-httponly">stormpath.web.refreshTokenCookie.httpOnly</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-refreshtokencookie-secure">stormpath.web.refreshTokenCookie.secure</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-refreshtokencookie-path">stormpath.web.refreshTokenCookie.path</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-refreshtokencookie-domain">stormpath.web.refreshTokenCookie.domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-refreshtokencookie-maxage">stormpath.web.refreshTokenCookie.maxAge</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-produces">stormpath.web.produces</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-autologin">stormpath.web.register.autoLogin</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-givenname-enabled">stormpath.web.register.form.fields.givenName.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-givenname-visible">stormpath.web.register.form.fields.givenName.visible</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-givenname-label">stormpath.web.register.form.fields.givenName.label</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-givenname-placeholder">stormpath.web.register.form.fields.givenName.placeholder</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-givenname-required">stormpath.web.register.form.fields.givenName.required</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-givenname-type">stormpath.web.register.form.fields.givenName.type</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-middlename-enabled">stormpath.web.register.form.fields.middleName.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-middlename-visible">stormpath.web.register.form.fields.middleName.visible</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-middlename-label">stormpath.web.register.form.fields.middleName.label</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-middlename-placeholder">stormpath.web.register.form.fields.middleName.placeholder</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-middlename-required">stormpath.web.register.form.fields.middleName.required</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-middlename-type">stormpath.web.register.form.fields.middleName.type</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-surname-enabled">stormpath.web.register.form.fields.surname.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-surname-visible">stormpath.web.register.form.fields.surname.visible</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-surname-label">stormpath.web.register.form.fields.surname.label</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-surname-placeholder">stormpath.web.register.form.fields.surname.placeholder</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-surname-required">stormpath.web.register.form.fields.surname.required</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-surname-type">stormpath.web.register.form.fields.surname.type</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-username-enabled">stormpath.web.register.form.fields.username.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-username-visible">stormpath.web.register.form.fields.username.visible</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-username-label">stormpath.web.register.form.fields.username.label</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-username-placeholder">stormpath.web.register.form.fields.username.placeholder</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-username-required">stormpath.web.register.form.fields.username.required</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-username-type">stormpath.web.register.form.fields.username.type</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-email-enabled">stormpath.web.register.form.fields.email.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-email-visible">stormpath.web.register.form.fields.email.visible</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-email-label">stormpath.web.register.form.fields.email.label</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-email-placeholder">stormpath.web.register.form.fields.email.placeholder</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-email-required">stormpath.web.register.form.fields.email.required</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-email-type">stormpath.web.register.form.fields.email.type</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-password-enabled">stormpath.web.register.form.fields.password.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-password-visible">stormpath.web.register.form.fields.password.visible</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-password-label">stormpath.web.register.form.fields.password.label</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-password-placeholder">stormpath.web.register.form.fields.password.placeholder</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-password-required">stormpath.web.register.form.fields.password.required</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-password-type">stormpath.web.register.form.fields.password.type</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-confirmpassword-enabled">stormpath.web.register.form.fields.confirmPassword.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-confirmpassword-visible">stormpath.web.register.form.fields.confirmPassword.visible</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-confirmpassword-label">stormpath.web.register.form.fields.confirmPassword.label</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-confirmpassword-placeholder">stormpath.web.register.form.fields.confirmPassword.placeholder</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-confirmpassword-required">stormpath.web.register.form.fields.confirmPassword.required</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fields-confirmpassword-type">stormpath.web.register.form.fields.confirmPassword.type</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-register-form-fieldorder">stormpath.web.register.form.fieldOrder</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-login-form-fields-login-enabled">stormpath.web.login.form.fields.login.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-login-form-fields-login-visible">stormpath.web.login.form.fields.login.visible</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-login-form-fields-login-label">stormpath.web.login.form.fields.login.label</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-login-form-fields-login-placeholder">stormpath.web.login.form.fields.login.placeholder</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-login-form-fields-login-required">stormpath.web.login.form.fields.login.required</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-login-form-fields-login-type">stormpath.web.login.form.fields.login.type</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-login-form-fields-password-enabled">stormpath.web.login.form.fields.password.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-login-form-fields-password-visible">stormpath.web.login.form.fields.password.visible</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-login-form-fields-password-label">stormpath.web.login.form.fields.password.label</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-login-form-fields-password-placeholder">stormpath.web.login.form.fields.password.placeholder</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-login-form-fields-password-required">stormpath.web.login.form.fields.password.required</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-login-form-fields-password-type">stormpath.web.login.form.fields.password.type</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-login-form-fieldorder">stormpath.web.login.form.fieldOrder</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-changepassword-autologin">stormpath.web.changePassword.autoLogin</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-changepassword-erroruri">stormpath.web.changePassword.errorUri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-social-facebook-uri">stormpath.web.social.facebook.uri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-social-github-uri">stormpath.web.social.github.uri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-social-google-uri">stormpath.web.social.google.uri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-social-linkedin-uri">stormpath.web.social.linkedin.uri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-me-enabled">stormpath.web.me.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-me-uri">stormpath.web.me.uri</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-me-expand-apikeys">stormpath.web.me.expand.apiKeys</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-me-expand-applications">stormpath.web.me.expand.applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-me-expand-customdata">stormpath.web.me.expand.customData</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-me-expand-directory">stormpath.web.me.expand.directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-me-expand-groupmemberships">stormpath.web.me.expand.groupMemberships</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-me-expand-groups">stormpath.web.me.expand.groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-me-expand-providerdata">stormpath.web.me.expand.providerData</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-me-expand-tenant">stormpath.web.me.expand.tenant</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-http-authc-challenge">stormpath.web.http.authc.challenge</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-json-view-resolver-order">stormpath.web.json.view.resolver.order</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-jsp-view-resolver-order">stormpath.web.jsp.view.resolver.order</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-assets-defaultservletname">stormpath.web.assets.defaultServletName</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-assets-enabled">stormpath.web.assets.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-assets-css-enabled">stormpath.web.assets.css.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-assets-js-enabled">stormpath.web.assets.js.enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix/default-stormpath-properties.html#stormpath-web-assets-handlermapping-order">stormpath.web.assets.handlerMapping.order</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="appendix/i18n-properties.html">i18n.properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix/stormpath-css.html">stormpath.css</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix/change-password.html">/WEB-INF/jsp/stormpath/change-password.jsp</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix/forgot-password.html">/WEB-INF/jsp/stormpath/forgot-password.jsp</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix/login.html">/WEB-INF/jsp/stormpath/login.jsp</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix/register.html">/WEB-INF/jsp/stormpath/register.jsp</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix/verify.html">/WEB-INF/jsp/stormpath/verify.jsp</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Stormpath Spring WebMVC Integration</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 







<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Tutorial</li>
    <li class="wy-breadcrumbs-aside">
      
          
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <blockquote>
<div></div></blockquote>
<div class="section" id="tutorial">
<span id="id1"></span><h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline"></a></h1>
<p>This tutorial will take you from zero to a Stormpath enabled application featuring Spring  WebMVC and Spring Security integration.</p>
<p>It should take about 30 minutes from start to finish. If you are looking for a bare bones intro to using Stormpath Spring WebMVC Integration, check out the <a class="reference internal" href="quickstart.html"><em>Quickstart</em></a>.</p>
<p>If you&#8217;ve already gone through the quickstart, jump over to the <a class="reference internal" href="#spring-meet-stormpath"><span>Spring: Meet Stormpath</span></a> section.</p>
<p>All of the code in the tutorial makes use of the <code class="docutils literal"><span class="pre">stormpath-spring-security-webmvc</span></code> integration. This integration has it all:
Spring, Spring Web MVC, Spring Security and the JSP templating engine - all integrated with Stormpath. Component features,
such as Spring Security, can easily be disabled through the use of properties or via annotations. (You&#8217;ll see an example of disabling
Spring Security with properties in the <a class="reference internal" href="#spring-meet-stormpath"><span>Spring: Meet Stormpath</span></a> section).</p>
<p>Topics:</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#get-an-api-key" id="id9">Get an API Key</a></li>
<li><a class="reference internal" href="#spring-meet-stormpath" id="id10">Spring: Meet Stormpath</a></li>
<li><a class="reference internal" href="#some-access-controls" id="id11">Some Access Controls</a></li>
<li><a class="reference internal" href="#spring-security-meet-stormpath" id="id12">Spring Security: Meet Stormpath</a></li>
<li><a class="reference internal" href="#spring-security-refined" id="id13">Spring Security Refined</a></li>
<li><a class="reference internal" href="#a-finer-grain-of-control" id="id14">A Finer Grain of Control</a></li>
<li><a class="reference internal" href="#token-management" id="id15">Token Management</a></li>
<li><a class="reference internal" href="#wrapping-up" id="id16">Wrapping Up</a></li>
</ul>
</div>
<div class="section" id="get-an-api-key">
<h2><a class="toc-backref" href="#id9">Get an API Key</a><a class="headerlink" href="#get-an-api-key" title="Permalink to this headline"></a></h2>
<p>All communication with Stormpath must be authenticated with an API Key.</p>
<ol class="arabic">
<li><p class="first">If you havent already, <a class="reference external" href="https://api.stormpath.com/register">sign up for Stormpath for free</a>.  Youll be sent a verification email.</p>
</li>
<li><p class="first">Click the link in the verification email.</p>
</li>
<li><p class="first">Log in to the <a class="reference external" href="https://api.stormpath.com">Stormpath Admin Console</a> using the email address and password you used during registration and the assigned tenant id.</p>
</li>
<li><p class="first">Click the <strong>Create API Key</strong> or <strong>Manage Existing Keys</strong> button.</p>
</li>
<li><p class="first">Under <strong>Security Credentials</strong>, click <strong>Create API Key</strong>.</p>
<p>This will generate your API Key and download it to your computer as an <code class="docutils literal"><span class="pre">apiKey.properties</span></code> file.</p>
</li>
<li><p class="first">Save the file in your home directory in the following location:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">~/.stormpath/apiKey.properties</span></code> on Unix, Linux and Mac OS</li>
<li><code class="docutils literal"><span class="pre">C:\Users\YOUR_USERNAME\.stormpath\apiKey.properties</span></code> on Windows</li>
</ul>
</li>
<li><p class="first">Change the file permissions to ensure only you can read this file and not accidentally write or modify it. For example:</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ chmod go-rwx ~/.stormpath/apiKey.properties
$ chmod u-w ~/.stormpath/apiKey.properties
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<p>On Windows, you can <a class="reference external" href="http://msdn.microsoft.com/en-us/library/bb727008.aspx">set file permissions similarly</a>.</p>
<p>For the rest of the tutorial, we will be referring to the tutorial code found in <a class="reference external" href="https://github.com/stormpath/stormpath-sdk-java/tree/master/tutorials/spring">tutorials/spring</a> .</p>
<p>Each of the tutorial sections is completely standalone and can be used as a starting point for your own applications.</p>
<p>For instance, if you wanted to build a Stormpath Spring WebMVC Integration project, including Spring Security integrated with Stormpath, you
could do the following:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">cd</span> &lt;path to Stormpath sdk&gt;
checkout stormpath-sdk-root-stormpath-spring-security-webmvc
mkdir /MyProject
<span class="nb">cd</span> /MyProject
cp -r &lt;path to Stormpath sdk&gt;/tutorials/spring/03-spring-security-refined/* .
mvn clean package
mvn tomcat7:run
</pre></div>
</div>
</div>
<div class="section" id="spring-meet-stormpath">
<span id="id2"></span><h2><a class="toc-backref" href="#id10">Spring: Meet Stormpath</a><a class="headerlink" href="#spring-meet-stormpath" title="Permalink to this headline"></a></h2>
<p>Let&#8217;s fire up a basic Spring WebMVC application. The code for this section can be found in <a class="reference external" href="https://github.com/stormpath/stormpath-sdk-java/tree/master/tutorials/spring/00-the-basics">tutorials/spring/00-the-basics</a>.</p>
<p>Note: This assumes you have your <code class="docutils literal"><span class="pre">apiKey.properties</span></code> file in the standard location: <code class="docutils literal"><span class="pre">~/.stormpath/apiKey.properties</span></code>.</p>
<p>To build and run, do this:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>mvn clean package
mvn tomcat7:run
</pre></div>
</div>
<p>You should now be able to browse to <a class="reference external" href="http://localhost:8080">http://localhost:8080</a> and see a welcome message with your Stormpath application&#8217;s name.</p>
<p>This application has just three code files, a properties file, and a web descriptor in it. Here&#8217;s the structure:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>src
 main
     java
      com
          stormpath
              tutorial
<span class="hll">                  WebAppInitializer.java
</span>                  config
<span class="hll">                   WebAppConfig.java
</span>                  controller
<span class="hll">                      HelloController.java
</span>     resources
      application.properties
     webapp
         WEB-INF
             web.xml
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">WebAppInitializer.java</span></code> is a basic Spring WebMVC application class. It overrides the <code class="docutils literal"><span class="pre">onStartup</span></code> method from the <code class="docutils literal"><span class="pre">WebApplicationInitializer</span></code> interface:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebAppInitializer</span> <span class="kd">implements</span> <span class="n">WebApplicationInitializer</span> <span class="o">{</span>
</span>
    <span class="nd">@Override</span>
<span class="hll">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onStartup</span><span class="o">(</span><span class="n">ServletContext</span> <span class="n">sc</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span> <span class="o">{</span>
</span>
        <span class="n">AnnotationConfigWebApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigWebApplicationContext</span><span class="o">();</span>
<span class="hll">        <span class="n">context</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">WebAppConfig</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span>        <span class="n">sc</span><span class="o">.</span><span class="na">addListener</span><span class="o">(</span><span class="k">new</span> <span class="n">ContextLoaderListener</span><span class="o">(</span><span class="n">context</span><span class="o">));</span>

<span class="hll">        <span class="n">DispatcherServlet</span> <span class="n">dispatcherServlet</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DispatcherServlet</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
</span>        <span class="n">ServletRegistration</span><span class="o">.</span><span class="na">Dynamic</span> <span class="n">dispatcher</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">addServlet</span><span class="o">(</span><span class="s">&quot;dispatcher&quot;</span><span class="o">,</span> <span class="n">dispatcherServlet</span><span class="o">);</span>
        <span class="n">dispatcher</span><span class="o">.</span><span class="na">setLoadOnStartup</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
        <span class="n">dispatcher</span><span class="o">.</span><span class="na">addMapping</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">);</span>

<span class="hll">        <span class="n">FilterRegistration</span><span class="o">.</span><span class="na">Dynamic</span> <span class="n">filter</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">addFilter</span><span class="o">(</span><span class="s">&quot;stormpathFilter&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">DelegatingFilterProxy</span><span class="o">());</span>
</span>        <span class="n">EnumSet</span><span class="o">&lt;</span><span class="n">DispatcherType</span><span class="o">&gt;</span> <span class="n">types</span> <span class="o">=</span>
                <span class="n">EnumSet</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">DispatcherType</span><span class="o">.</span><span class="na">ERROR</span><span class="o">,</span> <span class="n">DispatcherType</span><span class="o">.</span><span class="na">FORWARD</span><span class="o">,</span> <span class="n">DispatcherType</span><span class="o">.</span><span class="na">INCLUDE</span><span class="o">,</span> <span class="n">DispatcherType</span><span class="o">.</span><span class="na">REQUEST</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addMappingForUrlPatterns</span><span class="o">(</span><span class="n">types</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="s">&quot;/*&quot;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>There are three primary bits of setup going on here. Line 7 registers the <code class="docutils literal"><span class="pre">WebAppConfig</span></code> with the application (see below).
Line 10 sets up the <code class="docutils literal"><span class="pre">DispatcherServlet</span></code>. And, line 15 adds in the <code class="docutils literal"><span class="pre">stormpathFilter</span></code>.</p>
<p><code class="docutils literal"><span class="pre">WebAppConfig</span></code> is where the Stormpath integration magic is happening:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll"><span class="nd">@EnableStormpath</span> <span class="c1">//Stormpath base beans</span>
</span><span class="hll"><span class="nd">@EnableStormpathWebMvc</span> <span class="c1">//Stormpath web mvc beans plus out-of-the-box views</span>
</span><span class="nd">@EnableWebMvc</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="s">&quot;com.stormpath.tutorial&quot;</span><span class="o">)</span>
<span class="hll"><span class="nd">@PropertySource</span><span class="o">(</span><span class="s">&quot;classpath:application.properties&quot;</span><span class="o">)</span>
</span><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebAppConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
<span class="hll">    <span class="kd">public</span> <span class="kd">static</span> <span class="n">PropertySourcesPlaceholderConfigurer</span> <span class="nf">propertySourcesPlaceholderConfigurer</span><span class="o">()</span> <span class="o">{</span>
</span>        <span class="k">return</span> <span class="k">new</span> <span class="n">PropertySourcesPlaceholderConfigurer</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Lines 1 and 2 enable Stormpath and Stormpath WebMVC. Lines 5 and 10 ensure that you can override that default
<code class="docutils literal"><span class="pre">stormpath.*</span></code> properties in your own <code class="docutils literal"><span class="pre">application.properties</span></code> file.</p>
<p>That&#8217;s everything that&#8217;s needed to get the views and the other features of Stormpath!</p>
<p><code class="docutils literal"><span class="pre">HelloController.java</span></code> is a where we get our first taste of Stormpath in action:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nd">@RestController</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloController</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
<span class="hll">    <span class="n">Application</span> <span class="n">app</span><span class="o">;</span>
</span>
    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">hello</span><span class="o">()</span> <span class="o">{</span>
<span class="hll">        <span class="k">return</span> <span class="s">&quot;Hello, &quot;</span> <span class="o">+</span> <span class="n">app</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
</span>    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>On line 5 we are getting hold of the Stormpath Application and on line 9 we are obtaining its name for display.</p>
<p>For this example, we don&#8217;t want Spring Security locking everything down, which is its default behavior. So, we will simply
disable it. That&#8217;s where the <code class="docutils literal"><span class="pre">application.properties</span></code> files comes in:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">stormpath</span><span class="o">.</span><span class="na">spring</span><span class="o">.</span><span class="na">security</span><span class="o">.</span><span class="na">enabled</span> <span class="o">=</span> <span class="kc">false</span>
</pre></div>
</td></tr></table></div>
<p>That property disables Spring Security and avoids our Spring Security integration to be loaded.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Alternatively you can disable the Stormpath Spring Security integration while keeping Spring Security enabled. Such setup will allow you
to take full control of Spring Security&#8217;s configuration without having Stormath&#8217;s integration in the mix. This can be
achieved by having <cite>stormpath.spring.security.enabled = false</cite> in your configuration file.</p>
</div>
<p>Pretty simple setup, right? In the next section, we&#8217;ll layer in some flow logic based on logged-in state. And then we
will refine that to make use of all the Spring Security has to offer in making our lives easier.</p>
</div>
<div class="section" id="some-access-controls">
<span id="id3"></span><h2><a class="toc-backref" href="#id11">Some Access Controls</a><a class="headerlink" href="#some-access-controls" title="Permalink to this headline"></a></h2>
<p>I am going to say something a little radical here: Don&#8217;t use the code in this section in real life! &#8220;Why have it at all?&#8221;, you may ask.</p>
<p>In the next section, we will talk about having access controls the &#8220;right&#8221; way by using Stormpath&#8217;s integration with Spring Security.</p>
<p>The purpose of this section is to demonstrate the manual labor required in &#8220;rolling your own&#8221; permissions assertion layer.
Feel free to skip right over to the <a class="reference internal" href="#spring-security-meet-stormpath"><span>Spring Security: Meet Stormpath</span></a> section.</p>
<p>The code for this section can be found in <a class="reference external" href="https://github.com/stormpath/stormpath-sdk-java/tree/master/tutorials/spring/01-some-access-controls">tutorials/spring/01-some-access-controls</a>.</p>
<p>Let&#8217;s say there&#8217;s a restricted page that you only want authenticated users to have access to. We can determine that someone
is logged in simply by obtaining an <code class="docutils literal"><span class="pre">Account</span></code> object. If it&#8217;s <code class="docutils literal"><span class="pre">null</span></code>, the user is not logged in. If it resolves to an
object, then the user is logged in.</p>
<p>Let&#8217;s take a look at the updated <code class="docutils literal"><span class="pre">HelloController.java</span></code> file:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloController</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">AccountResolver</span> <span class="n">accountResolver</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="nf">HelloController</span><span class="o">(</span><span class="n">AccountResolver</span> <span class="n">accountResolver</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Assert</span><span class="o">.</span><span class="na">notNull</span><span class="o">(</span><span class="n">accountResolver</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">accountResolver</span> <span class="o">=</span> <span class="n">accountResolver</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">home</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;status&quot;</span><span class="o">,</span> <span class="n">req</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&quot;status&quot;</span><span class="o">));</span>
        <span class="k">return</span> <span class="s">&quot;home&quot;</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;/restricted&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">restricted</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">)</span> <span class="o">{</span>
<span class="hll">        <span class="k">if</span> <span class="o">(</span><span class="n">accountResolver</span><span class="o">.</span><span class="na">getAccount</span><span class="o">(</span><span class="n">req</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span>            <span class="k">return</span> <span class="s">&quot;restricted&quot;</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="s">&quot;redirect:/login&quot;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>If we are able to get an account via <code class="docutils literal"><span class="pre">accountResolver.getAccount(req)</span></code>, then we return the <code class="docutils literal"><span class="pre">restricted</span></code>
template. Otherwise, we redirect to <code class="docutils literal"><span class="pre">/login</span></code>.</p>
<p>The code from this section also incorporates some other cool features of
<a class="reference external" href="https://github.com/stormpath/stormpath-sdk-java/tree/master/extensions/spring/stormpath-spring-security-webmvc">stormpath-spring-security-webmvc</a>.</p>
<p>It makes use of JSPs. Support for JSP is built in to <code class="docutils literal"><span class="pre">stormpath-spring-security-webmvc</span></code>. In
fact, the default views for login, register and forgot, change and verify are all JSPs.</p>
<p>It also makes use of some settings in <code class="docutils literal"><span class="pre">application.properties</span></code>.</p>
<p>By default, the next page after <code class="docutils literal"><span class="pre">/logout</span></code> is <code class="docutils literal"><span class="pre">/login?status=logout</span></code>. For this example, an alternate is set using:</p>
<p><code class="docutils literal"><span class="pre">stormpath.web.logout.nextUri</span> <span class="pre">=</span> <span class="pre">/?status=logout</span></code></p>
<p>So, in this case, when you logout you will be redirected to the homepage with a message that will be shown on the page.</p>
<p>You can see this in action by running this example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>mvn clean package
mvn tomcat7:run
</pre></div>
</div>
<p>Now, let&#8217;s take a look at using Spring Security to restrict access.</p>
</div>
<div class="section" id="spring-security-meet-stormpath">
<span id="id4"></span><h2><a class="toc-backref" href="#id12">Spring Security: Meet Stormpath</a><a class="headerlink" href="#spring-security-meet-stormpath" title="Permalink to this headline"></a></h2>
<p>With the Stormpath Spring Security integration, you can use its standard syntax to restrict access to endpoints and
methods.</p>
<p>The official Spring Security documentation is at <a class="reference external" href="http://projects.spring.io/spring-security/">http://projects.spring.io/spring-security</a>.</p>
<p>Let&#8217;s take a look at the additions and changes to the project.</p>
<p>The code for this section can be found in <a class="reference external" href="https://github.com/stormpath/stormpath-sdk-java/tree/master/tutorials/spring/02-spring-security-ftw">tutorials/spring/02-spring-security-ftw</a>.</p>
<p>We&#8217;ve added a configuration file called <code class="docutils literal"><span class="pre">SpringSecurityWebAppConfig.java</span></code>. How does Spring know it&#8217;s a configuration file?
It has the <code class="docutils literal"><span class="pre">&#64;Configuration</span></code> annotation:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">static</span> <span class="n">com</span><span class="o">.</span><span class="na">stormpath</span><span class="o">.</span><span class="na">spring</span><span class="o">.</span><span class="na">config</span><span class="o">.</span><span class="na">StormpathWebSecurityConfigurer</span><span class="o">.</span><span class="na">stormpath</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="s">&quot;com.stormpath.tutorial&quot;</span><span class="o">)</span>
<span class="nd">@PropertySource</span><span class="o">(</span><span class="s">&quot;classpath:application.properties&quot;</span><span class="o">)</span>
<span class="nd">@EnableStormpathWebSecurity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringSecurityWebAppConfig</span> <span class="kd">extends</span> <span class="n">WebSecurityConfigurerAdapter</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>

        <span class="n">http</span>
<span class="hll">            <span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">stormpath</span><span class="o">())</span>
</span>            <span class="o">.</span><span class="na">and</span><span class="o">()</span>
                <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">()</span>
                <span class="o">.</span><span class="na">antMatchers</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">).</span><span class="na">permitAll</span><span class="o">()</span>
            <span class="o">.</span><span class="na">and</span><span class="o">()</span>
                <span class="o">.</span><span class="na">exceptionHandling</span><span class="o">().</span><span class="na">accessDeniedPage</span><span class="o">(</span><span class="s">&quot;/403&quot;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>In order to easily hook into the Stormpath Spring Security integration, simply add a <code class="docutils literal"><span class="pre">WebSecurityConfigurerAdapter</span></code> in the application.
Then, apply stormpath using <code class="docutils literal"><span class="pre">.apply(stormpath())</span></code>.
Doing that just sets up all of the default views and hooks the Stormpath <code class="docutils literal"><span class="pre">AuthenticationManager</span></code> into your application.</p>
<p>Based on the <code class="docutils literal"><span class="pre">SpringSecurityWebAppConfig</span></code> above, we will permit access to the homepage. Any other paths will fall back
to the default of being secured - you would be redirected to the Stormpath login page. We are going to further protect
access to a service by requiring group membership with the <code class="docutils literal"><span class="pre">&#64;PreAuthorize</span></code> annotation (as you&#8217;ll see below).</p>
<p>Next, we&#8217;ve added a service called <code class="docutils literal"><span class="pre">HelloService.java</span></code>:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">MY_GROUP</span> <span class="o">=</span> <span class="s">&quot;GROUP_HREF_HERE&quot;</span><span class="o">;</span>

<span class="hll">    <span class="nd">@PreAuthorize</span><span class="o">(</span><span class="s">&quot;hasAuthority(&#39;&quot;</span> <span class="o">+</span> <span class="n">MY_GROUP</span> <span class="o">+</span> <span class="s">&quot;&#39;)&quot;</span><span class="o">)</span>
</span>    <span class="kd">public</span> <span class="n">String</span> <span class="nf">sayHello</span><span class="o">(</span><span class="n">Account</span> <span class="n">account</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&quot;Hello, &quot;</span> <span class="o">+</span> <span class="n">account</span><span class="o">.</span><span class="na">getGivenName</span><span class="o">()</span> <span class="o">+</span>
            <span class="s">&quot;. You have the required permissions to access this restricted resource.&quot;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>With the Stormpath Spring Security integration, roles are tied to Stormpath Groups. A Stormpath Group has a unique
URL (aka href) to identify it. Line 5 above ensures that only members of the group (identified by the URL you put in for the
<code class="docutils literal"><span class="pre">MY_GROUP</span></code> variable) can access the <code class="docutils literal"><span class="pre">sayHello</span></code> method.</p>
<p>NOTE: In this example, <code class="docutils literal"><span class="pre">hasAuthority</span></code> is used because Spring Security looks for roles with a &#8220;ROLE_&#8221; prefix.
For this reason, we recommend you use <code class="docutils literal"><span class="pre">hasAuthority</span></code>. See <a class="reference external" href="https://github.com/stormpath/stormpath-sdk-java/issues/325#issuecomment-220923162">this issue</a>
for more information.</p>
<p>If the authenticated user is not in the specified group, a <code class="docutils literal"><span class="pre">403</span></code> (forbidden) status will be returned.</p>
<p>This will automatically redirect to <code class="docutils literal"><span class="pre">/403</span></code>, which gets handled by our <code class="docutils literal"><span class="pre">ErrorController.java</span></code>.
This returns a nicely formatted JSP.</p>
<p>With the service defined, we can incorporate it into our controller, <code class="docutils literal"><span class="pre">HelloController.java</span></code>:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloController</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">AccountResolver</span> <span class="n">accountResolver</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">HelloService</span> <span class="n">helloService</span><span class="o">;</span>

<span class="hll">    <span class="nd">@Autowired</span>
</span>    <span class="kd">public</span> <span class="nf">HelloController</span><span class="o">(</span><span class="n">AccountResolver</span> <span class="n">accountResolver</span><span class="o">,</span> <span class="n">HelloService</span> <span class="n">helloService</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Assert</span><span class="o">.</span><span class="na">notNull</span><span class="o">(</span><span class="n">accountResolver</span><span class="o">);</span>
        <span class="n">Assert</span><span class="o">.</span><span class="na">notNull</span><span class="o">(</span><span class="n">helloService</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">accountResolver</span> <span class="o">=</span> <span class="n">accountResolver</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">helloService</span> <span class="o">=</span> <span class="n">helloService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span>
    <span class="n">String</span> <span class="nf">home</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;status&quot;</span><span class="o">,</span> <span class="n">req</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&quot;status&quot;</span><span class="o">));</span>
        <span class="k">return</span> <span class="s">&quot;home&quot;</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;/restricted&quot;</span><span class="o">)</span>
    <span class="n">String</span> <span class="nf">restricted</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
<span class="hll">        <span class="n">String</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">helloService</span><span class="o">.</span><span class="na">sayHello</span><span class="o">(</span>
</span><span class="hll">            <span class="n">accountResolver</span><span class="o">.</span><span class="na">getAccount</span><span class="o">(</span><span class="n">req</span><span class="o">)</span>
</span><span class="hll">        <span class="o">);</span>
</span>        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;msg&quot;</span><span class="o">,</span> <span class="n">msg</span><span class="o">);</span>
        <span class="k">return</span> <span class="s">&quot;restricted&quot;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Line 7 uses the Spring Autowiring capability to make the <code class="docutils literal"><span class="pre">AccountResolver</span></code> and the <code class="docutils literal"><span class="pre">HelloService</span></code> available in the
<code class="docutils literal"><span class="pre">HelloController</span></code>.</p>
<p>Lines 23 - 25 attempts to call the <code class="docutils literal"><span class="pre">sayHello</span></code> method.</p>
<p>Give this a spin yourself. Make sure that you replace the <code class="docutils literal"><span class="pre">MY_GROUP</span></code> value in <code class="docutils literal"><span class="pre">HelloService</span></code> with the actual URL to the group you&#8217;ve
setup in the Stormpath Admin Console.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>mvn clean package
mvn tomcat7:run
</pre></div>
</div>
<p>In the next section, we&#8217;ll add a small amount of code to be able to dynamically set the Group reference and make the code more readable.</p>
</div>
<div class="section" id="spring-security-refined">
<span id="id5"></span><h2><a class="toc-backref" href="#id13">Spring Security Refined</a><a class="headerlink" href="#spring-security-refined" title="Permalink to this headline"></a></h2>
<p>The code for this section can be found in <a class="reference external" href="https://github.com/stormpath/stormpath-sdk-java/tree/master/tutorials/spring/03-spring-security-refined">tutorials/spring/03-spring-security-refined</a>.</p>
<p>In the previous section, we hard-coded the Stormpath group href into <code class="docutils literal"><span class="pre">HelloService</span></code>.</p>
<p>This is cumbersome in a real world situation where you may have multiple environments (dev, stage, prod, etc.).
You don&#8217;t want to have to change source, recompile and deploy for a new environment or when you change a group in Stormpath.</p>
<p>With a little bit of Spring magic and Stormpath&#8217;s super flexible configuration mechanism, we can make this much more dynamic.</p>
<p>Take a look at the updated <code class="docutils literal"><span class="pre">HelloService</span></code> class:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloService</span> <span class="o">{</span>
<span class="hll">    <span class="nd">@PreAuthorize</span><span class="o">(</span><span class="s">&quot;hasAuthority(@groups.USER)&quot;</span><span class="o">)</span>
</span>    <span class="kd">public</span> <span class="n">String</span> <span class="nf">sayHello</span><span class="o">(</span><span class="n">Account</span> <span class="n">account</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&quot;Hello, &quot;</span> <span class="o">+</span> <span class="n">account</span><span class="o">.</span><span class="na">getGivenName</span><span class="o">()</span> <span class="o">+</span>
            <span class="s">&quot;. You have the required permissions to access this restricted resource.&quot;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Spring has an expression language called
<a class="reference external" href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/expressions.html">SpringEL</a>, that let&#8217;s you
reference objects and properties found in your Spring app in a number of ways.</p>
<p>The <code class="docutils literal"><span class="pre">&#64;</span></code> symbol is used to refer to a bean that is in the Spring context. On line 3 above, we are referencing the
<code class="docutils literal"><span class="pre">USER</span></code> property of the <code class="docutils literal"><span class="pre">groups</span></code> bean. The implication is that there is a <code class="docutils literal"><span class="pre">USER</span></code> group defined somewhere that Spring
can resolve.</p>
<p>Remember, in the context of Stormpath, that must ultimately resolve to a fully qualified href that refers to a Stormpath group.</p>
<p>Let&#8217;s now take a look at this <code class="docutils literal"><span class="pre">groups</span></code> bean.</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll"><span class="nd">@Component</span>
</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Groups</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">USER</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="nf">Groups</span><span class="o">(</span><span class="n">Environment</span> <span class="n">env</span><span class="o">)</span> <span class="o">{</span>
<span class="hll">        <span class="n">USER</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&quot;stormpath.authorized.user.group.href&quot;</span><span class="o">);</span>
</span>    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Line 1 uses the standard Spring <code class="docutils literal"><span class="pre">&#64;Component</span></code> annotation to instantiate this object and make it available as a bean in
the application.</p>
<p>By default, Spring will name the bean in context using camelcase conventions. Therefore the bean will be named <code class="docutils literal"><span class="pre">groups</span></code>.</p>
<p>We use some Spring magic on lines 5 and 6 to pass the <code class="docutils literal"><span class="pre">Environment</span></code> into the constructor using the <cite>&#64;Autowired</cite> annotation.</p>
<p>In the constructor, we set the <code class="docutils literal"><span class="pre">USER</span></code> variable to the value of the environment property called <code class="docutils literal"><span class="pre">stormpath.authorized.user.group.href</span></code>.</p>
<p>The expectation is that the <code class="docutils literal"><span class="pre">stormpath.authorized.user.group.href</span></code> environment variable will hold the fully qualified href to the
Stormpath group that backs the <code class="docutils literal"><span class="pre">USER</span></code> group.</p>
<p>With Spring, you can define the <code class="docutils literal"><span class="pre">stormpath.authorized.user.group.href</span></code> in the <code class="docutils literal"><span class="pre">application.properties</span></code> file and that
property will be available to your app.</p>
<p>Now, for the Stormpath magic. You can also have a system environment variable named <code class="docutils literal"><span class="pre">STORMPATH_AUTHORIZED_USER_GROUP_HREF</span></code>.
Behind the scenes, Stormpath will convert that system environment variable to a Spring environment variable named
<code class="docutils literal"><span class="pre">stormpath.authorized.user.group.href</span></code>.</p>
<p>This makes it very easy to change the group <code class="docutils literal"><span class="pre">USER</span></code> group href in different deployment environments without having to
reconfigure and recompile your code.</p>
<p>Additionally, the <code class="docutils literal"><span class="pre">Groups</span></code> class is very easily extended. Let&#8217;s say you want to add an <code class="docutils literal"><span class="pre">ADMIN</span></code> role into the mix. You
could update the <code class="docutils literal"><span class="pre">Groups</span></code> class like so:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span>    <span class="nd">@Component</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Groups</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">USER</span><span class="o">;</span>
<span class="hll">        <span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ADMIN</span><span class="o">;</span>
</span>
        <span class="nd">@Autowired</span>
        <span class="kd">public</span> <span class="nf">Groups</span><span class="o">(</span><span class="n">Environment</span> <span class="n">env</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">USER</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&quot;stormpath.authorized.user.group.href&quot;</span><span class="o">);</span>
<span class="hll">            <span class="n">ADMIN</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&quot;stormpath.authorized.admin.group.href&quot;</span><span class="o">);</span>
</span>        <span class="o">}</span>
    <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>You can try this out for yourself by running this example like so:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>mvn clean package

<span class="nv">STORMPATH_AUTHORIZED_USER_GROUP_HREF</span><span class="o">=</span>&lt;href to your group in Stormpath&gt; <span class="se">\</span>
mvn tomcat7:run
</pre></div>
</div>
<p>In this example, we are also taking advantage of Stormpath&#8217;s configuration mechanism. This reduces boilerplate code.</p>
<p>Next up: An even finer grain of control using Spring Security permissions.</p>
</div>
<div class="section" id="a-finer-grain-of-control">
<span id="id6"></span><h2><a class="toc-backref" href="#id14">A Finer Grain of Control</a><a class="headerlink" href="#a-finer-grain-of-control" title="Permalink to this headline"></a></h2>
<p>The code for this section can be found in <a class="reference external" href="https://github.com/stormpath/stormpath-sdk-java/tree/master/tutorials/spring/04-a-finer-grain-of-control">tutorials/spring/04-a-finer-grain-of-control</a>.</p>
<p>So far, we&#8217;ve restricted access to certain methods with the <cite>hasAuthority</cite> clause of the <cite>&#64;PreAuthorize</cite> annotation. In this
section, we are going to look at examples that give a finer grain of control and demonstrate how Stormpath hooks into
Spring Security.</p>
<p>As before, we allow unauthenticated access to the homepage <code class="docutils literal"><span class="pre">/</span></code> in <code class="docutils literal"><span class="pre">SpringSecurityWebAppConfig.java</span></code>.</p>
<p>For more on <code class="docutils literal"><span class="pre">HttpSecurity</span></code> with Spring Security, see <a class="reference external" href="http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#jc-httpsecurity">its HttpSecurity documentation</a>.</p>
<p>We&#8217;ve added a new method to our <code class="docutils literal"><span class="pre">HelloController</span></code>. It does not call out any other authorizaton requirements. As such,
anyone logged in will be able to access <code class="docutils literal"><span class="pre">/userdetails</span></code>. Furthermore, anyone NOT logged in trying to access <code class="docutils literal"><span class="pre">/userdetails</span></code> will automatically
be redirected to the <code class="docutils literal"><span class="pre">/login</span></code> view.</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloController</span> <span class="o">{</span>

    <span class="o">...</span>
    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;/userdetails&quot;</span><span class="o">)</span>
    <span class="n">String</span> <span class="nf">userDetails</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&quot;userdetails&quot;</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Try it out. Launch the application as before, and then browse to: <code class="docutils literal"><span class="pre">http://localhost:8080/userdetails</span></code>. You will be redirected to the <code class="docutils literal"><span class="pre">/login</span></code>
and then after you login to a valid Stormpath Account, you will automatically be brought back to <code class="docutils literal"><span class="pre">/userdetails</span></code>. That&#8217;s the Stormpath magic at work!</p>
<p>Now, we&#8217;ll look at fine grained controls using Spring Security permissions connected to Stormpath custom data.</p>
<p>Every first class object in Stormpath can have custom data associated with it. For instance, you can have custom data at the Group level as well
as at the Account level.</p>
<p>In general, custom data can be completely arbitrary JSON data of any kind. There&#8217;s a special key that can be used at the top level of custom data
that the Spring Security <code class="docutils literal"><span class="pre">hasPermission</span></code> clause will respond to. Note: this does not preclude you in any way from having other custom data.</p>
<p>Let&#8217;s take a look at the updated <code class="docutils literal"><span class="pre">HelloService</span></code>:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloService</span> <span class="o">{</span>
<span class="hll">    <span class="nd">@PreAuthorize</span><span class="o">(</span><span class="s">&quot;hasAuthority(@groups.USER) and hasPermission(&#39;say&#39;, &#39;hello&#39;)&quot;</span><span class="o">)</span>
</span>    <span class="kd">public</span> <span class="n">String</span> <span class="nf">sayHello</span><span class="o">(</span><span class="n">Account</span> <span class="n">account</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&quot;Hello, &quot;</span> <span class="o">+</span> <span class="n">account</span><span class="o">.</span><span class="na">getGivenName</span><span class="o">()</span> <span class="o">+</span>
            <span class="s">&quot;. You have the required permissions to access this restricted resource.&quot;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Notice that in addition to the <code class="docutils literal"><span class="pre">hasAuthority</span></code> clause, we now have added: <code class="docutils literal"><span class="pre">hasPermission('say',</span> <span class="pre">'hello')</span></code>. We are saying that
in addition to the user being in the group identified by <code class="docutils literal"><span class="pre">&#64;groups.USER</span></code>, they must also have the permission to say hello.</p>
<p>This is connected to Stormpath by having the following custom data present:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;springSecurityPermissions&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;say:hello&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">springSecurityPermissions</span></code> is the special key we talked about above. Its value is an array of strings each of which
conforms to the following format: <code class="docutils literal"><span class="pre">target:permission</span></code>. In this case, the target is <em>say</em> and the permission is <em>hello</em>.</p>
<p>Note that you can put this custom data at the group level, in which case it would apply to everyone in the group or you
could have it present for individual accounts. As long as the condition declared by the <code class="docutils literal"><span class="pre">hasPermission</span></code> clause is met
(as well as the user belonging to the right group), the user will have access to the <code class="docutils literal"><span class="pre">sayHello</span></code> method.</p>
<p>You could have many specific permissions attached to the <code class="docutils literal"><span class="pre">say</span></code> target. If you wanted to grant a user or group access to
any permission in the <code class="docutils literal"><span class="pre">say</span></code> target, you could take advantage of Stormpath&#8217;s wildcard permissions syntax. That looks like:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;springSecurityPermissions&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;say:*&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you had one method protected by: <code class="docutils literal"><span class="pre">hasPermission('say',</span> <span class="pre">'hello')</span></code> and another method protected by:
<code class="docutils literal"><span class="pre">hasPermission('say',</span> <span class="pre">'goodbye')</span></code>, the above <code class="docutils literal"><span class="pre">customData</span></code> would grant the user or group entry into both methods.</p>
<p>Try this out for yourself. In the Stormpath Admin Console, add two user accounts to the group you&#8217;ve been using in the
previous examples.</p>
<img alt="_images/group.png" src="_images/group.png" />
<p>Add the custom data to one of the users, but not the other.</p>
<img alt="_images/user-custom-data.png" src="_images/user-custom-data.png" />
<img alt="_images/user-no-custom-data.png" src="_images/user-no-custom-data.png" />
<p>You will find that, although both users are in the right group, only the one with the <code class="docutils literal"><span class="pre">springSecurityPermissions</span></code> custom data
will be able to get to the <code class="docutils literal"><span class="pre">/restricted</span></code> page.</p>
</div>
<div class="section" id="token-management">
<span id="id7"></span><h2><a class="toc-backref" href="#id15">Token Management</a><a class="headerlink" href="#token-management" title="Permalink to this headline"></a></h2>
<p>The code for this section can be found in <a class="reference external" href="https://github.com/stormpath/stormpath-sdk-java/tree/master/tutorials/spring/05-token-management">tutorials/spring/05-token-management</a>.</p>
<p>The Java SDK supports <a class="reference external" href="http://oauth.net/2/">oauth2</a> workflows for obtaining and interacting with access tokens and
refresh tokens. The Token Management feature is included &#8220;out of the box&#8221; and is used via the <cite>/oauth/token</cite> endpoint.</p>
<p>The Token Management feature is supported all through the Java SDK stack, including Servlet, Spring, Spring Boot and
Spring Security (with and without WebMVC).</p>
<p>This part of the tutorial exercises the Token Magement features using Spring Security WebMVC.</p>
<p>There&#8217;s a simple <code class="docutils literal"><span class="pre">&#64;RestController</span></code> called <code class="docutils literal"><span class="pre">UserDetailsController</span></code> that returns information about the authenticated account.</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nd">@RestController</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserDetailsController</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">AccountResolver</span> <span class="n">accountResolver</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="nf">UserDetailsController</span><span class="o">(</span><span class="n">AccountResolver</span> <span class="n">accountResolver</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Assert</span><span class="o">.</span><span class="na">notNull</span><span class="o">(</span><span class="n">accountResolver</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">accountResolver</span> <span class="o">=</span> <span class="n">accountResolver</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span><span class="o">=</span><span class="s">&quot;/userdetails&quot;</span><span class="o">,</span> <span class="n">produces</span> <span class="o">=</span> <span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON_VALUE</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">AccountInfo</span> <span class="nf">info</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// must be logged in to get here per Spring Security config</span>
        <span class="n">Account</span> <span class="n">account</span> <span class="o">=</span> <span class="n">accountResolver</span><span class="o">.</span><span class="na">getAccount</span><span class="o">(</span><span class="n">req</span><span class="o">);</span>

        <span class="k">return</span> <span class="k">new</span> <span class="n">AccountInfo</span><span class="o">(</span><span class="n">account</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span> <span class="n">account</span><span class="o">.</span><span class="na">getFullName</span><span class="o">(),</span> <span class="n">account</span><span class="o">.</span><span class="na">getHref</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>In order to hit the <code class="docutils literal"><span class="pre">/userdetails</span></code> endpoint, we&#8217;ll first, we&#8217;ll get an <code class="docutils literal"><span class="pre">access_token</span></code> and a <code class="docutils literal"><span class="pre">refresh_token</span></code> by hitting the
<code class="docutils literal"><span class="pre">/oauth/token</span></code> endpoint:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -v -X POST <span class="se">\</span>
  -H <span class="s2">&quot;Origin: http://localhost:8080&quot;</span> <span class="se">\</span>
  -H <span class="s2">&quot;Content-Type: application/x-www-form-urlencoded&quot;</span> <span class="se">\</span>
  -d <span class="s2">&quot;grant_type=password&amp;username=&lt;valid_email_address&gt;&amp;password=&lt;valid_password&gt;&quot;</span> <span class="se">\</span>
  http://localhost:8080/oauth/token
</pre></div>
</div>
<p>Note: Make sure that the email address and password are URL encoded.</p>
<p>You will get back a response that looks something like this:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;access_token&quot;</span><span class="o">:</span><span class="s2">&quot;eyJraWQiOiJSOTJTQkhKQzFVNERBSU1HUTNNSE9HVk1YIiwiYWxnIjoiSFMyNTYifQ...&quot;</span><span class="p">,</span>
  <span class="s2">&quot;refresh_token&quot;</span><span class="o">:</span><span class="s2">&quot;eyJraWQiOiJSOTJTQkhKQzFVNERBSU1HUTNNSE9HVk1YIiwiYWxnIjoiSFMyNTYifQ...&quot;</span><span class="p">,</span>
  <span class="s2">&quot;token_type&quot;</span><span class="o">:</span><span class="s2">&quot;Bearer&quot;</span><span class="p">,</span>
  <span class="s2">&quot;expires_in&quot;</span><span class="o">:</span><span class="mi">3600</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The response includes the tokens as well as information on their type (<code class="docutils literal"><span class="pre">Bearer</span></code> in this case) and when it expires.</p>
<p>We can now use the <code class="docutils literal"><span class="pre">access_token</span></code> to hit the <code class="docutils literal"><span class="pre">/userdetails</span></code> endpoint:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl <span class="se">\</span>
  -H <span class="s2">&quot;Authorization: Bearer eyJraWQiOiJSOTJTQkhKQzFVNERBSU1HUTNNSE9HVk1YIiwiYWxnIjoiSFMyNTYifQ...&quot;</span> <span class="se">\</span>
  http://localhost:8080/userdetails
</pre></div>
</div>
<p>You will get a response like this:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;href&quot;</span><span class="o">:</span><span class="s2">&quot;https://api.stormpath.com/v1/accounts/4WScMbAno3V95iiSswkjPX&quot;</span><span class="p">,</span>
  <span class="s2">&quot;fullName&quot;</span><span class="o">:</span><span class="s2">&quot;Micah Silverman&quot;</span><span class="p">,</span>
  <span class="s2">&quot;email&quot;</span><span class="o">:</span><span class="s2">&quot;micah@stormpath.com&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Refresh tokens are used to obtain a new access token. This is useful when you want to allow your users to have a longer
lived session - such as in a mobile application - but you still want to maintain control over how the session is
managed. Your application could automatically use the <code class="docutils literal"><span class="pre">refresh_token</span></code> to obtain a new <code class="docutils literal"><span class="pre">access_token</span></code> when the
<code class="docutils literal"><span class="pre">access_token</span></code> expires. With this approach, you could revoke the user&#8217;s <code class="docutils literal"><span class="pre">refresh_token</span></code> and they would be kicked out of
the system sooner because the <code class="docutils literal"><span class="pre">access_token</span></code> is short lived. In this scenario, the next time the <code class="docutils literal"><span class="pre">access_token</span></code> expired,
the <code class="docutils literal"><span class="pre">refresh_token</span></code> would be rejected when trying to get a new <code class="docutils literal"><span class="pre">access_token</span></code>.</p>
<p>Let&#8217;s use the <code class="docutils literal"><span class="pre">refresh_token</span></code> above to get a new <code class="docutils literal"><span class="pre">access_token</span></code>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -v -X POST <span class="se">\</span>
  -H <span class="s2">&quot;Origin: http://localhost:8080&quot;</span> <span class="se">\</span>
  -H <span class="s2">&quot;Content-Type: application/x-www-form-urlencoded&quot;</span> <span class="se">\</span>
  -d <span class="s2">&quot;grant_type=refresh_token&amp;refresh_token=eyJraWQiOiJSOTJTQkhKQzFVNERBSU1HUTNNSE9HVk1YIiwiYWxnIjoiSFMyNTYifQ...&quot;</span> <span class="se">\</span>
  http://localhost:8080/oauth/token
</pre></div>
</div>
<p>Notice that in this case the <code class="docutils literal"><span class="pre">grant_type</span></code> is <code class="docutils literal"><span class="pre">refresh_token</span></code> and that we are using the <code class="docutils literal"><span class="pre">refresh_token</span></code> that we obtained
previously.</p>
<p>You will get a response like this:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;access_token&quot;</span><span class="o">:</span><span class="s2">&quot;eyJraWQiOiJSOTJTQkhKQzFVNERBSU1HUTNNSE9HVk1YIiwiYWxnIjoiSFMyNTYifQ...&quot;</span><span class="p">,</span>
  <span class="s2">&quot;refresh_token&quot;</span><span class="o">:</span><span class="s2">&quot;eyJraWQiOiJSOTJTQkhKQzFVNERBSU1HUTNNSE9HVk1YIiwiYWxnIjoiSFMyNTYifQ...&quot;</span><span class="p">,</span>
  <span class="s2">&quot;token_type&quot;</span><span class="o">:</span><span class="s2">&quot;Bearer&quot;</span><span class="p">,</span>
  <span class="s2">&quot;expires_in&quot;</span><span class="o">:</span><span class="mi">3600</span>
<span class="p">}</span>
</pre></div>
</div>
<p>While the <code class="docutils literal"><span class="pre">refresh_token</span></code> is the same, we get a new <code class="docutils literal"><span class="pre">access_token</span></code>.</p>
<p>By default, when you logout, both the <code class="docutils literal"><span class="pre">access_token</span></code> and the <code class="docutils literal"><span class="pre">refresh_token</span></code> will be revoked. Let&#8217;s see this in action:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -v -X POST <span class="se">\</span>
  -H <span class="s2">&quot;Authorization: Bearer eyJraWQiOiJSOTJTQkhKQzFVNERBSU1HUTNNSE9HVk1YIiwiYWxnIjoiSFMyNTYifQ...&quot;</span> <span class="se">\</span>
  http://localhost:8080/logout
</pre></div>
</div>
<p>Now, if you attempt to use the <code class="docutils literal"><span class="pre">access_token</span></code> again, you will not be granted access as it&#8217;s been invalidated. You will
need to login again.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl <span class="se">\</span>
  -H <span class="s2">&quot;Authorization: Bearer eyJraWQiOiJSOTJTQkhKQzFVNERBSU1HUTNNSE9HVk1YIiwiYWxnIjoiSFMyNTYifQ...&quot;</span> <span class="se">\</span>
  http://localhost:8080/userdetails
</pre></div>
</div>
<p>Here&#8217;s the response:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;error&quot;</span><span class="o">:</span><span class="s2">&quot;invalid_client&quot;</span><span class="p">,</span>
  <span class="s2">&quot;error_description&quot;</span><span class="o">:</span><span class="s2">&quot;access_token is invalid.&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As you can see from the examples above, Stormpath provides powerful oauth2 Token Management out-of-the-box using the
<code class="docutils literal"><span class="pre">/oauth/token</span></code> endpoint. There is no additional coding required on your part to make use of the Token Management
feature.</p>
</div>
<div class="section" id="wrapping-up">
<span id="id8"></span><h2><a class="toc-backref" href="#id16">Wrapping Up</a><a class="headerlink" href="#wrapping-up" title="Permalink to this headline"></a></h2>
<p>We hope this tutorial has been of value to you in learning about the Stormpath Spring WebMVC Integration.</p>
<p>You can use the Stormpath Spring Security integration in contexts other than Spring WebMVC as well.
For instance, you could write a REST API that makes use of Spring Security that has no web layer.</p>
<p>Take a look at the <a class="reference external" href="/java/apidocs">javadocs</a> as well as the <a class="reference external" href="https://github.com/stormpath/stormpath-sdk-java/tree/master/examples">other code examples</a>
for more information on all that the Stormpath Java SDK has to offer.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="config.html" class="btn btn-neutral float-right" title="Configuration" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="quickstart.html" class="btn btn-neutral" title="Quickstart" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Stormpath, Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.5.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

  

</body>
</html>